<div class="component-body pt15">
	<div class="top clearfix">
		<div class="left">
			<div class="search">
				<input type="search" class="form-control input" [(ngModel)]="searchedTerm" placeholder="Search..."
					(keyup.enter)="toggleFirstPanel($event)" aria-label="Search">
				<span class="icon"><i class="fa fa-search" aria-hidden="true"></i>
				</span>
			</div>


			<!-- Checklist Type dropdown start -->
			<div class="sel-contact select-company pr-2">
				<div class="dropdown">
					<button class="btn btn-default btn-block dropdown-noBlur" (click)="onChecklistType()"
						style="text-align:left;" type="button">{{checklistType ? checklistType + 'Checklist' : 'Checklist Type'}}
						<span class="caret caret-right"></span>
					</button>
					<div class="dropdown-menu" [ngClass]="isChecklistTypeDropdownOpen ? 'show' : ''"
						style="width:369px;padding:15px;z-index: 2;">
						<div class="row form-group">
							<div class="col-sm-12">
								<label for="sel" class="normal-font-weight">Select Checklist Type</label><br>
								<select class="select" id="sel" #sel (change)="generateChecklist(sel.value)"
									[ngModel]="checklistType">
									<option disabled>Select Checklist Type</option>
									<option value="General">General Checklist</option>
									<option value="Composite">Composite Checklist</option>
								</select>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-12">
								<!-- <ng-container
									*ngIf="checklistTypeForModal == 'General' && checkListSwitcherData.length > 0">
									<label class="normal-font-weight">Select Checklist:</label><br>
									<mat-form-field appearance="outline" class="selectWhiteTheme">
										<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''" multiple
											overlayPanelClass="custom-overlay-panel" (ngModelChane)="selectedPeople"
											[(ngModel)]="selectedPeople"
											(selectionChange)="selectChecklist($event.value)"
											[disableOptionCentering]="true" panelClass="mat-select-position-top">
											<mat-option [value]="'all'">All</mat-option>
											<mat-option *ngFor="let topping of checkListSwitcherData"
												[value]="topping.id">{{topping.checklistName}}</mat-option>
										</mat-select>
									</mat-form-field>
								</ng-container> -->
								<ng-container
									*ngIf="checklistTypeForModal == 'General' && checkListSwitcherData.length > 0">
									<label class="normal-font-weight">Select Checklist:</label><br>
									<mat-form-field appearance="outline" class="selectWhiteTheme">
										<mat-select #select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''" multiple
											overlayPanelClass="custom-overlay-panel" (ngModelChane)="selectedPeople"
											[(ngModel)]="selectedPeople" [disableOptionCentering]="true"
											panelClass="mat-select-position-top">
											<!-- <mat-option [value]="'all'">All</mat-option> -->
											<div class="select-all">
												<mat-checkbox [(ngModel)]="allSelected"
													[ngModelOptions]="{standalone: true}"
													(change)="toggleAllSelection()">Select All</mat-checkbox>
											</div>
											<mat-option (click)="optionClick()"
												*ngFor="let topping of checkListSwitcherData"
												[value]="topping.id">{{topping.checklistName}}</mat-option>
										</mat-select>
									</mat-form-field>
								</ng-container>

								<ng-container
									*ngIf="checklistTypeForModal == 'Composite' && compositeChecklist.length > 0">
									<label class="normal-font-weight">Select Checklist:</label>
									<select class="select" #sel [ngModel]="value"
										(change)="switchCompositeChecklist(sel.value)">
										<option [value]="e.id" *ngFor="let e of compositeChecklist">
											{{e.compositeChecklistName}}
										</option>
									</select>
								</ng-container>

							</div>
						</div>
						<div class='' style="width: 100%;padding: 10px 0px;">
							<ng-container *ngIf="checklistTypeForModal != 'Composite'">
								<button type="button" class="btn btn-panel pull-right"
									[disabled]="selectedPeople.length == 0" (click)="onChecklistTypeApply()"> Apply
								</button>
							</ng-container>
							<ng-container *ngIf="checklistTypeForModal == 'Composite'">
								<button type="button" class="btn btn-panel pull-right"
									[disabled]="!value || value?.length == 0" (click)="onChecklistTypeApply()"> Apply
								</button>
							</ng-container>
							<button type="button" class="btn btn-white pull-right" id="clearFilter"
								(click)="cancelChecklistType()"> Cancel </button>
						</div>
					</div>
				</div>

			</div>
			<!-- Checklist Type dropdown end -->
		</div>
		<div class="right">
			<!-- <select class="select"  #sel (change)="generateChecklist(sel.value)">
				  <option>select</option>
				   <option value="formGenerateChecklist">Generate Checklist</option>
				   <option  value="formGenerateCompositeChecklist">Generate Composite Checklist</option>
			   </select> -->

			<ng-container *ngIf="!isCustomerLoggedIn && mainChecklistArray.length > 0">
				<span>Hide Completed:</span>
				<div class="button-switch">
					<input type="checkbox" (click)="toggleCompleted()" id="primary-switch" class="switch" />
					<label for="primary-switch" class="lbl-off"></label>
					<label for="primary-switch" class="lbl-on"></label>
				</div>
				<ng-container *ngIf="checklistType == 'Composite' && showChecklistAddBtn =='show' && isShowTcoItems">
					<span>Show TCO Items</span>
					<div class="button-switch mr10">
						<input type="checkbox" (click)="toggleTco()" id="switch-blue" class="switch" />
					</div>
				</ng-container>
			</ng-container>
			<div class="export" *ngIf="isShowExport && mainChecklistArray.length > 0">
				<!-- <img (click)="openExportChecklistModalForm(exportChecklist)" src="./assets/images/XL_icon.svg"
					tooltip="Export XLS" width="28px"> -->
				<export-xls-pdf-widget (onExportClick)="openExportChecklistModalForm(exportChecklist,$event)">
				</export-xls-pdf-widget>
			</div>
			<!-- <button class="btn btn-white" *ngIf="checklistType == 'Composite'">Add External Application</button> -->
			<ng-container *ngIf="!isCustomerLoggedIn">
				<button class="btn btn-blue" *ngIf="showChecklistAddBtn =='show'" (click)="createChecklist()">Create a
					Checklist</button>
			</ng-container>
			<!-- <div class="icon">
				<a href="#"><i class="fa fa-file-excel-o" aria-hidden="true"></i></a>
				<a href="#"><i class="material-symbols-rounded" aria-hidden="true">delete</i></a>
				<a href="#"><i class="fa fa-pencil" aria-hidden="true"></i></a>
			</div> -->
			<ng-container *ngIf="!isCustomerLoggedIn">
				<div
					*ngIf="mainChecklistArray.length > 0 && (showChecklistAddBtn =='show' || showChecklistDeleteBtn =='show') && checklistType == 'Composite'">
					<img style="cursor: pointer;width:34px" *ngIf="mainChecklistArray"
						src="./assets/images/hamburger-dot.png"
						[matMenuTriggerFor]="(checklistType == 'Composite')? menu : menuGeneral"
						aria-label="Example icon-button with a menu">
					<mat-menu #menu="matMenu">
						<!-- <button mat-menu-item>
							<span>Export Checklist</span>
						</button> -->
						<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item (click)="editCompositeChecklist()">
							<span>Edit Composite Checklist</span>
						</button>
						<button *ngIf="showChecklistDeleteBtn =='show'" mat-menu-item
							(click)="deleteChecklist(tplDeleteChecklist)">
							<span>Delete Composite Checklist</span>
						</button>
						<!-- <button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
							(click)="openExternalChecklisModalForm(formAddExternalChecklist)">
							<span>Add External Application</span>
						</button> -->
					</mat-menu>
					<!-- <mat-menu #menuGeneral="matMenu">
						<button mat-menu-item (click)="exportChecklistData()">
							<span>Edit</span>
						</button>
						<button mat-menu-item (click)="exportChecklistData()">
							<span>Export Checklist</span>
						</button>
						<button mat-menu-item (click)="exportChecklistData()">
							<span>Delete Checklist</span>
						</button>
					</mat-menu> -->
				</div>
			</ng-container>

		</div>
	</div>

	<div class="main" *ngIf="checklistType == 'General'">

		<mat-accordion *ngIf="mainChecklistArray.length > 0" multi>
			<mat-expansion-panel class="header" #mapanel1="matExpansionPanel" hideToggle="true"
				[expanded]="application.isExpanded" *ngFor="let application of mainChecklistArray; let i = index;">
				<mat-expansion-panel-header (click)="manageAccordianParentExpand(application,'','',mapanel1)">
					<mat-panel-title class="h3">
						<span class="material-symbols-outlined r-90">expand_circle_down</span>
						<span>
							{{application.applicationName}}
						</span>
						<input type="text" (keyup.enter)="updateHeaderInfo(application,$event)"
							[readonly]="isCustomerLoggedIn" (keydown.space)="$event.stopPropagation()"
							(keydown)="$event.stopPropagation()" [value]="application?.others"
							class="form-control information-input" (focusout)="updateHeaderInfo(application,$event)"
							maxlength="50" placeholder="Information">
					</mat-panel-title>
					<ng-container *ngIf="!isCustomerLoggedIn">
						<span class="pull-right acts">
							<span class="material-symbols-rounded"
								[ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }" (click)="mapanel1.close();"
								[matMenuTriggerFor]="generalActionMenu">more_vert</span>
							<mat-menu #generalActionMenu>
								<button mat-menu-item (click)="editChecklist(application.jobChecklistHeaderId)">
									<span>Edit Checklist</span>
								</button>
								<button mat-menu-item
									(click)="deleteChecklist(tplDeleteChecklist,application.jobChecklistHeaderId)">
									<span>Delete Checklist</span>
								</button>
							</mat-menu>
						</span>
					</ng-container>
				</mat-expansion-panel-header>

				<div cdkDropList (cdkDropListDropped)="drop($event,application.jobChecklistHeaderId)">
					<mat-accordion *ngIf="application.groups.length > 0" multi>
						<mat-expansion-panel #mapanel="matExpansionPanel" [expanded]="group.isExpanded"
							*ngFor="let group of application.groups;let groupIndex = index" cdkDrag class="sub-item">
							<mat-expansion-panel-header
								(click)="manageAccordianParentExpand(application,group.jobChecklistGroupId,groupIndex,mapanel)">
								<mat-panel-title>
									<span class="material-symbols-outlined" [ngClass]="{'disabled': isCustomerLoggedIn}"
										cdkDragHandle>drag_indicator</span>
									{{group.checkListGroupName}}
								</mat-panel-title>
								<ng-container *ngIf="group.checkListGroupType != 'PL'">
									<button class="btn btn-danger mr-2" *ngIf="!isCustomerLoggedIn"
										(click)="mapanel.close();deleteMultipleSelectedItems(deleteConfirmationMultipleItems,group)">
										Delete Items</button>
									<button class="blue-btn {{showChecklistAddBtn}}" *ngIf="!isCustomerLoggedIn"
										(click)="mapanel.close()"
										(click)="isOpen(group.jobChecklistGroupId,application.jobChecklistHeaderId)">
										Add Item</button>
								</ng-container>
							</mat-expansion-panel-header>

							<table *ngIf="group.checkListGroupType == 'General'" class="table" cdkDropList
								(cdkDropListDropped)="dropItems($event, group.jobChecklistGroupId, application.jobChecklistHeaderId)">
								<tr>
									<th style="width: 10px;"></th>
									<th style="width: 46px;"></th>
									<th>ITEM
									</th>
									<th class="partyResponsible-th">PARTY RESPONSIBLE</th>
									<th class="comment">COMMENTS</th>
									<th class="date_tab">TARGET DATE</th>
									<th class="status_tab">STATUS</th>
									<th></th>
								</tr>

								<ng-container *ngFor="let item of group.item">
									<ng-container *ngIf="isHideCompleted">
										<tr cdkDrag class="example-box-items" [ngClass]="{'d-none': item.status == 3}"
											[ngStyle]="item.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}">
											<td>
												<div class="checkbox form-check">
													<label class="form-check-label">
														<input (change)="item.isChecked = !item.isChecked"
															type="checkbox" class="form-check-input">
														<i class="input-helper"></i>
													</label>
												</div>
											</td>
											<td cdkDragHandle [ngClass]="{'disabled': isCustomerLoggedIn}">
												<span class="material-symbols-outlined"
													[ngClass]="{'disabled': isCustomerLoggedIn}">drag_indicator</span>
											</td>

											<td><span
													[innerHTML]="item.checklistItemName | highlight: searchedTerm"></span>
											</td>

											<td>
												<div class="partyResponsible">
													<mat-form-field appearance="outline" class="custom-dropdown w-50">
														<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
															[disabled]="(showChecklistAddBtn =='hide')"
															[(ngModel)]='item.partyResponsible' #status
															(selectionChange)="updatePartyResponcible(status.value, item.jocbChecklistItemDetailsId)">
															<mat-option *ngFor="let responsible of partyResponsible"
																[value]="responsible.value">{{responsible.title}}</mat-option>
														</mat-select>
													</mat-form-field>

													<div class="contecytResponsible"
														*ngIf="item.partyResponsible == 'Contact'">
														<mat-form-field appearance="outline"
															class="custom-dropdown w-92">
															<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																[(ngModel)]="item.idContact"
																[disabled]="isCustomerLoggedIn"
																(selectionChange)="changeContact($event,item.jocbChecklistItemDetailsId)">
																<mat-option *ngFor="let topping of jobContacts"
																	[value]="topping.idContact">{{topping.contactName}}
																	<span *ngIf="topping.companyName">-</span>
																	{{topping.companyName}}</mat-option>
															</mat-select>
														</mat-form-field>
													</div>

													<input *ngIf="item.partyResponsible == 'Other'"
														[disabled]="showChecklistAddBtn =='hide'" type="text" #text
														class="input name" id="name"
														(blur)="onEnter($event,item.jocbChecklistItemDetailsId, group.jobChecklistGroupId)"
														(keyup.enter)="onEnter($event,item.jocbChecklistItemDetailsId, group.jobChecklistGroupId)"
														[(ngModel)]='item.manualPartyResponsible'
														placeholder="Enter Name" name="name">
												</div>


											</td>

											<td class="comment">
												<div class="comment-box"> <span
														[innerHTML]="item.comments | highlight: searchedTerm"></span>
													<a *ngIf="item.comments"
														[ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
														class="add-comment" [tooltip]="item.comments?'View And Add':''"
														style="margin-left: 1rem;"
														(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">...View</a>
													<a *ngIf="!item.comments"
														[ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
														class="add-newComment"
														[tooltip]="item.comments?'View And Add':''"
														(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">{{addCommentTitle}}</a>
												</div>
											</td>

											<td>
												<div class="date-container">
													<input id="dueDate" [disabled]="showChecklistAddBtn =='hide'"
														class="datepicker form-control" type="text" name="dueDate"
														#dueDate="ngModel" [ngModel]="item.dueDate"
														placeholder="mm-dd-yyyy" appDatepicker #datepicker="datepicker"
														(keydown)="onKeyPress($event)"
														(click)="getIdNumber(item.jocbChecklistItemDetailsId)"
														(dateEventEmitter)="dateEventEmitter($event, item.jocbChecklistItemDetailsId)" />
												</div>
											</td>

											<td>
												<mat-form-field appearance="outline" class="custom-dropdown">
													<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
														[disabled]="showChecklistAddBtn =='hide'"
														[ngModel]="item.status" #t
														(selectionChange)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
														<mat-option *ngFor="let st of statusDropdown"
															[value]="st.value">{{st.title}}</mat-option>
													</mat-select>
												</mat-form-field>
											</td>

											<td style="cursor: pointer;">
												<span class="material-symbols-rounded" [matMenuTriggerFor]="menu"
													aria-label="Example icon-button with a menu"
													[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) : showChecklistAddBtn =='hide'}">more_vert</span>
												<mat-menu #menu="matMenu">
													<ng-container *ngIf="!isCustomerLoggedIn">
														<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
															(click)="openModalAddDoc(addJobDocument,item.jocbChecklistItemDetailsId)">
															<span>Create form</span>
														</button>
														<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
															(click)="openModalAddForm(addtransmittal)">
															<span>Create transmittal</span>
														</button>
														<button
															*ngIf="(showChecklistAddBtn =='show') && (item.hasDocument == false)"
															mat-menu-item
															(click)="openModalAddDocUpload(upLoadJobDocument,item.jocbChecklistItemDetailsId,false)">

															<span>Upload Document</span>
														</button>
														<button
															*ngIf="(showChecklistAddBtn =='show') && (item.hasDocument == true)"
															mat-menu-item
															(click)="openModalViewDocUpload(jobDocument,item.jocbChecklistItemDetailsId, false)">

															<span>View Document</span>
														</button>
														<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
															(click)="openModalReferenceNote(ViewReferenceNote,item.jocbChecklistItemDetailsId,false)">
															<span>References</span>
														</button>
														<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
															(click)="openModalProgressNote(rfpprogressionnote,item.jocbChecklistItemDetailsId,false)">
															<span>Internal progress notes</span>
														</button>
														<button *ngIf="showChecklistDeleteBtn =='show'" mat-menu-item
															(click)="deleteChecklistItem(tplDeleteChecklistItem, item.jocbChecklistItemDetailsId,item.status)">
															<span>Delete</span>
														</button>
													</ng-container>
													<ng-container *ngIf="isCustomerLoggedIn && isShowClientNot">
														<button mat-menu-item
															(click)="addClientNote(clientnotes,item.jocbChecklistItemDetailsId)">
															<span>Client User Notes</span>
														</button>
													</ng-container>
												</mat-menu>
											</td>
										</tr>
									</ng-container>

									<ng-container *ngIf="!isHideCompleted">
										<tr cdkDrag class="example-box-items"
											[ngStyle]="item.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}">
											<td>
												<div class="checkbox form-check">
													<label class="form-check-label">
														<input (change)="item.isChecked = !item.isChecked"
															type="checkbox" class="form-check-input">
														<i class="input-helper"></i>
													</label>
												</div>
											</td>
											<td cdkDragHandle [ngClass]="{'disabled': isCustomerLoggedIn}">
												<span class="material-symbols-outlined"
													[ngClass]="{'disabled': isCustomerLoggedIn}">drag_indicator</span>
											</td>

											<td><span
													[innerHTML]="item.checklistItemName | highlight: searchedTerm"></span>
											</td>

											<td>
												<div class="partyResponsible">
													<mat-form-field appearance="outline" class="custom-dropdown w-50">
														<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
															[disabled]="(showChecklistAddBtn =='hide')"
															[(ngModel)]='item.partyResponsible' #status
															(selectionChange)="updatePartyResponcible(status.value, item.jocbChecklistItemDetailsId)">
															<mat-option *ngFor="let responsible of partyResponsible"
																[value]="responsible.value">{{responsible.title}}</mat-option>
														</mat-select>
													</mat-form-field>

													<div class="contecytResponsible"
														*ngIf="item.partyResponsible == 'Contact'">
														<mat-form-field appearance="outline"
															class="custom-dropdown w-92">
															<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																[(ngModel)]="item.idContact"
																[disabled]="isCustomerLoggedIn"
																(selectionChange)="changeContact($event,item.jocbChecklistItemDetailsId)">
																<mat-option *ngFor="let topping of jobContacts"
																	[value]="topping.idContact">{{topping.contactName}}
																	<span *ngIf="topping.companyName">-</span>
																	{{topping.companyName}}</mat-option>
															</mat-select>
														</mat-form-field>
													</div>

													<input *ngIf="item.partyResponsible == 'Other'"
														[disabled]="showChecklistAddBtn =='hide'" type="text" #text
														class="input name" id="name"
														(blur)="onEnter($event,item.jocbChecklistItemDetailsId, group.jobChecklistGroupId)"
														(keyup.enter)="onEnter($event,item.jocbChecklistItemDetailsId, group.jobChecklistGroupId)"
														[(ngModel)]='item.manualPartyResponsible'
														placeholder="Enter Name" name="name">
												</div>


											</td>

											<td class="comment">
												<div class="comment-box"> <span
														[innerHTML]="item.comments | highlight: searchedTerm"></span>
													<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
														*ngIf="item.comments" class="add-comment"
														[tooltip]="item.comments?'View And Add':''"
														style="margin-left: 1rem;"
														(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">...View</a>
													<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
														*ngIf="!item.comments" class="add-newComment"
														[tooltip]="item.comments?'View And Add':''"
														(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">{{addCommentTitle}}</a>
												</div>
											</td>
											<td>
												<div class="date-container">
													<input id="dueDate" [disabled]="showChecklistAddBtn =='hide'"
														class="datepicker form-control" type="text" name="dueDate"
														#dueDate="ngModel" [ngModel]="item.dueDate"
														placeholder="mm-dd-yyyy" appDatepicker #datepicker="datepicker"
														(keydown)="onKeyPress($event)"
														(click)="getIdNumber(item.jocbChecklistItemDetailsId)"
														(dateEventEmitter)="dateEventEmitter($event, item.jocbChecklistItemDetailsId)" />
												</div>
											</td>
											<td>
												<mat-form-field appearance="outline" class="custom-dropdown">
													<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
														[disabled]="showChecklistAddBtn =='hide'"
														[ngModel]="item.status" #t
														(selectionChange)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
														<mat-option *ngFor="let st of statusDropdown"
															[value]="st.value">{{st.title}}</mat-option>
													</mat-select>
												</mat-form-field>
											</td>
											<td style="cursor: pointer;">
												<span class="material-symbols-rounded" [matMenuTriggerFor]="menu"
													aria-label="Example icon-button with a menu"
													[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) : showChecklistAddBtn =='hide'}">more_vert</span>
												<mat-menu #menu="matMenu">
													<ng-container *ngIf="!isCustomerLoggedIn">
														<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
															(click)="openModalAddDoc(addJobDocument,item.jocbChecklistItemDetailsId)">

															<span>Create form</span>
														</button>
														<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
															(click)="openModalAddForm(addtransmittal)">

															<span>Create transmittal</span>
														</button>
														<button
															*ngIf="showChecklistAddBtn =='show' && (item.hasDocument == false)"
															mat-menu-item
															(click)="openModalAddDocUpload(upLoadJobDocument,item.jocbChecklistItemDetailsId,false)">

															<span>Upload Document</span>
														</button>
														<button
															*ngIf="(showChecklistAddBtn =='show') && (item.hasDocument == true)"
															mat-menu-item
															(click)="openModalViewDocUpload(jobDocument,item.jocbChecklistItemDetailsId, false)">

															<span>View Document</span>
														</button>
														<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
															(click)="openModalReferenceNote(ViewReferenceNote,item.jocbChecklistItemDetailsId,false)">

															<span>References</span>
														</button>
														<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
															(click)="openModalProgressNote(rfpprogressionnote,item.jocbChecklistItemDetailsId,false)">

															<span>Internal progress notes</span>
														</button>
														<button *ngIf="showChecklistDeleteBtn =='show'" mat-menu-item
															(click)="deleteChecklistItem(tplDeleteChecklistItem, item.jocbChecklistItemDetailsId,item.status)">
															<span>Delete</span>
														</button>
													</ng-container>
													<ng-container *ngIf="isCustomerLoggedIn && isShowClientNot">
														<button mat-menu-item
															(click)="addClientNote(clientnotes,item.jocbChecklistItemDetailsId)">
															<span>Client User Notes</span>
														</button>
													</ng-container>
												</mat-menu>
											</td>
										</tr>
									</ng-container>
								</ng-container>

							</table>
							<ng-container *ngIf="group.checkListGroupType == 'PL'">
								<div>
									<mat-accordion multi>
										<mat-expansion-panel #mapanel="matExpansionPanel" [expanded]="item.isExpanded"
											class="sub-item" *ngFor="let item of group.item;let itemIndex = index">
											<mat-expansion-panel-header
												(click)="manageAccordianParentExpand(application,group.jobChecklistGroupId,groupIndex,mapanel,itemIndex)">
												<mat-panel-title>
													<div class="floor-title">
														<span
															class="material-symbols-outlined r-90">expand_circle_down</span>
														Floor: <span> {{item.checklistItemName ||
															item.floorNumber}}</span>
														<div class="inspections-label" *ngIf="item.status">
															<span
																class="material-symbols-rounded fill">check_circle</span>
															All Inspections Complete
														</div>
													</div>
												</mat-panel-title>
												<button class="btn btn-danger mr-2" *ngIf="!isCustomerLoggedIn"
													(click)="mapanel.close();deleteMultipleSelectedItems(deleteConfirmationMultipleItems,item)">
													Delete Items</button>
												<button class="blue-btn" *ngIf="!isCustomerLoggedIn"
													(click)="mapanel.close();addInspection(group.jobChecklistGroupId,item.idJobPlumbingCheckListFloors,application.idWorkPermits)">Add
													Inspection</button>
											</mat-expansion-panel-header>

											<table class="table">
												<tr>
													<th style="width: 10px;"></th>
													<th>INSPECTION TYPE</th>
													<th>COMMENTS</th>
													<th class="status_tab">STATUS</th>
													<th></th>
												</tr>
												<ng-container *ngFor="let Plitem of item.details; let i= index">
													<ng-container *ngIf="Plitem.idJobPlumbingInspection != null">
														<ng-container *ngIf="isHideCompleted">
															<tr [ngClass]="{'d-none': Plitem.result == '1'}">
																<td style="padding-left: 14px;">
																	<div class="checkbox form-check">
																		<label class="form-check-label">
																			<input
																				(change)="Plitem.isChecked = !Plitem.isChecked"
																				type="checkbox"
																				class="form-check-input">
																			<i class="input-helper"></i>
																		</label>
																	</div>
																</td>
																<td> <span
																		[innerHTML]="Plitem.inspectionPermit | highlight: searchedTerm"></span>
																</td>
																<td>
																	<div class="comment-box-pl">
																		<span
																			[innerHTML]="Plitem.plComments | highlight: searchedTerm"></span>

																		<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
																			class="add-comment"
																			*ngIf="Plitem.plComments"
																			[tooltip]="Plitem.plComments?'View And Add':''"
																			style="margin-left: 1rem;"
																			(click)="isCommentOpen(Plitem.plComments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId, true, Plitem.idJobPlumbingInspection)">...View</a>
																		<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																			*ngIf="!Plitem.plComments"
																			class="add-newComment"
																			[tooltip]="Plitem.plComments?'View And Add':''"
																			(click)="isCommentOpen(Plitem.plComments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId, true, Plitem.idJobPlumbingInspection)">{{addCommentTitle}}</a>
																	</div>

																</td>
																<td>
																	<mat-form-field appearance="outline"
																		class="custom-dropdown">
																		<mat-select
																			[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																			[disabled]="showChecklistAddBtn =='hide'"
																			[ngModel]="Plitem.result" #t
																			(selectionChange)="updatePlStatus(t.value, Plitem.idJobPlumbingInspection)">
																			<mat-option *ngFor="let status of plStatus"
																				[value]="status.value">{{status.title}}</mat-option>
																		</mat-select>
																	</mat-form-field>
																</td>
																<td style="cursor: pointer;">
																	<span class="material-symbols-rounded"
																		[ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																		[matMenuTriggerFor]="menu"
																		aria-label="Example icon-button with a menu"
																		[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) : false}">more_vert</span>
																	<mat-menu #menu="matMenu">
																		<ng-container *ngIf="!isCustomerLoggedIn">
																			<button
																				*ngIf="showChecklistAddBtn =='show' && (Plitem.hasDocument == false)"
																				mat-menu-item
																				(click)="openModalAddDocUpload(upLoadJobDocument,Plitem.idJobPlumbingInspection,true)">

																				<span>Upload Document</span>
																			</button>
																			<button
																				*ngIf="(showChecklistAddBtn =='show') && (Plitem.hasDocument == true)"
																				mat-menu-item
																				(click)="openModalViewDocUpload(jobDocument,Plitem.idJobPlumbingInspection, true)">

																				<span>View Document</span>
																			</button>
																			<button *ngIf="showChecklistAddBtn =='show'"
																				mat-menu-item
																				(click)="openModalReferenceNote(ViewReferenceNote,Plitem.idJobPlumbingInspection,true)">

																				<span>References</span>
																			</button>
																			<button *ngIf="showChecklistAddBtn =='show'"
																				mat-menu-item
																				(click)="openModalProgressNote(rfpprogressionnote,application.jobChecklistHeaderId,true,Plitem.idJobPlumbingInspection)">

																				<span>Internal progress notes</span>
																			</button>
																			<button
																				*ngIf="showChecklistDeleteBtn =='show'"
																				mat-menu-item
																				(click)="deleteChecklistItemPL(PlItemDelete, Plitem.idJobPlumbingInspection,Plitem.result)">
																				<span>Delete</span>
																			</button>
																		</ng-container>

																		<ng-container
																			*ngIf="isCustomerLoggedIn && isShowClientNot">
																			<button mat-menu-item
																				(click)="addClientNote(clientnotes,Plitem.idJobPlumbingInspection,'PL')">
																				<span>Client User Notes</span>
																			</button>
																		</ng-container>
																	</mat-menu>
																</td>
															</tr>
														</ng-container>
														<ng-container *ngIf="!isHideCompleted">
															<tr>
																<td style="padding-left: 14px;">
																	<div class="checkbox form-check">
																		<label class="form-check-label">
																			<input
																				(change)="Plitem.isChecked = !Plitem.isChecked"
																				type="checkbox"
																				class="form-check-input">
																			<i class="input-helper"></i>
																		</label>
																	</div>
																</td>
																<td> <span
																		[innerHTML]="Plitem.inspectionPermit | highlight: searchedTerm"></span>
																</td>
																<td>
																	<div class="comment-box-pl">
																		<span
																			[innerHTML]="Plitem.plComments | highlight: searchedTerm"></span>

																		<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
																			class="add-comment"
																			*ngIf="Plitem.plComments"
																			[tooltip]="Plitem.plComments?'View And Add':''"
																			style="margin-left: 1rem;"
																			(click)="isCommentOpen(Plitem.plComments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId, true, Plitem.idJobPlumbingInspection)">...View</a>
																		<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																			*ngIf="!Plitem.plComments"
																			class="add-newComment"
																			[tooltip]="Plitem.plComments?'View And Add':''"
																			(click)="isCommentOpen(Plitem.plComments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId, true, Plitem.idJobPlumbingInspection)">{{addCommentTitle}}</a>
																	</div>
																</td>
																<td>
																	<mat-form-field appearance="outline"
																		class="custom-dropdown">
																		<mat-select
																			[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																			[disabled]="showChecklistAddBtn =='hide'"
																			[ngModel]="Plitem.result" #t
																			(selectionChange)="updatePlStatus(t.value, Plitem.idJobPlumbingInspection)">
																			<mat-option *ngFor="let status of plStatus"
																				[value]="status.value">{{status.title}}</mat-option>
																		</mat-select>
																	</mat-form-field>
																</td>
																<td style="cursor: pointer;">
																	<span class="material-symbols-rounded"
																		[ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																		[matMenuTriggerFor]="menu"
																		aria-label="Example icon-button with a menu"
																		[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) : false}">more_vert</span>
																	<mat-menu #menu="matMenu">
																		<ng-container *ngIf="!isCustomerLoggedIn">
																			<button
																				*ngIf="showChecklistAddBtn =='show' && (Plitem.hasDocument == false)"
																				mat-menu-item
																				(click)="openModalAddDocUpload(upLoadJobDocument,Plitem.idJobPlumbingInspection,true)">

																				<span>Upload Document</span>
																			</button>
																			<button
																				*ngIf="(showChecklistAddBtn =='show') && (Plitem.hasDocument == true)"
																				mat-menu-item
																				(click)="openModalViewDocUpload(jobDocument,Plitem.idJobPlumbingInspection, true)">

																				<span>View Document</span>
																			</button>
																			<button *ngIf="showChecklistAddBtn =='show'"
																				mat-menu-item
																				(click)="openModalReferenceNote(ViewReferenceNote,Plitem.idJobPlumbingInspection,true)">

																				<span>References</span>
																			</button>
																			<button *ngIf="showChecklistAddBtn =='show'"
																				mat-menu-item
																				(click)="openModalProgressNote(rfpprogressionnote,application.jobChecklistHeaderId,true,Plitem.idJobPlumbingInspection)">

																				<span>Internal progress notes</span>
																			</button>
																			<button
																				*ngIf="showChecklistDeleteBtn =='show'"
																				mat-menu-item
																				(click)="deleteChecklistItemPL(PlItemDelete, Plitem.idJobPlumbingInspection,Plitem.result)">

																				<span>Delete</span>
																			</button>
																		</ng-container>
																		<ng-container
																			*ngIf="isCustomerLoggedIn && isShowClientNot">
																			<button mat-menu-item
																				(click)="addClientNote(clientnotes,Plitem.idJobPlumbingInspection,'PL')">
																				<span>Client User Notes</span>
																			</button>
																		</ng-container>
																	</mat-menu>
																</td>
															</tr>
														</ng-container>
													</ng-container>

												</ng-container>
											</table>
										</mat-expansion-panel>
									</mat-accordion>
								</div>
							</ng-container>
							<ng-container *ngIf="group.checkListGroupType == 'TR'">
								<table class="table" cdkDropList
									(cdkDropListDropped)="dropItems($event, group.jobChecklistGroupId, application.jobChecklistHeaderId)">
									<tr>
										<th style="width: 10px;"></th>
										<th style="width: 46px;"></th>
										<th>ITEM NAME </th>
										<th>DESIGN APPLICANT </th>
										<th>INSPECTOR </th>
										<th>COMMENTS</th>
										<th>STAGE </th>
										<th class="TCO_tab"
											*ngIf="checklistType == 'Composite' && application?.isCOProject"> TCO</th>
										<th class="status_tab">STATUS </th>
										<th></th>
									</tr>

									<ng-container *ngFor="let item of group.item">
										<ng-container *ngIf="isHideCompleted">
											<tr cdkDrag [ngClass]="{'d-none': item.status == 3}"
												[ngStyle]="item.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}">
												<td>
													<div class="checkbox form-check">
														<label class="form-check-label">
															<input type="checkbox" class="form-check-input"
																(change)="item.isChecked = !item.isChecked">
															<i class="input-helper"></i>
														</label>
													</div>
												</td>
												<td cdkDragHandle [ngClass]="{'disabled': isCustomerLoggedIn}">
													<span class="material-symbols-outlined"
														[ngClass]="{'disabled': isCustomerLoggedIn}">drag_indicator</span>
												</td>
												<td><span
														[innerHTML]="item.checklistItemName | highlight: searchedTerm"></span>
												</td>
												<td>
													<mat-form-field appearance="outline" class="custom-dropdown">
														<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
															[disabled]="showChecklistAddBtn =='hide'"
															[(ngModel)]="item.idDesignApplicant"
															(selectionChange)="changeApplicant($event,item.jocbChecklistItemDetailsId)">
															<mat-option *ngFor="let topping of jobContacts"
																[value]="topping.id">{{topping.contactName}} <span
																	*ngIf="topping.companyName">-</span>
																{{topping.companyName}}</mat-option>
														</mat-select>
													</mat-form-field>
												</td>
												<td>
													<mat-form-field appearance="outline" class="custom-dropdown">
														<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
															[disabled]="showChecklistAddBtn =='hide'"
															[(ngModel)]="item.idInspector"
															(selectionChange)="changeInspector($event,item.jocbChecklistItemDetailsId)">
															<mat-option *ngFor="let topping of jobContacts"
																[value]="topping.id">{{topping.contactName}} <span
																	*ngIf="topping.companyName">-</span>
																{{topping.companyName}}</mat-option>
														</mat-select>
													</mat-form-field>
												</td>
												<td class="comment">
													<div class="comment-box"><span
															[innerHTML]="item.comments | highlight: searchedTerm"></span>
														<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
															*ngIf="item.comments"
															[tooltip]="item.comments?'View And Add':''"
															class="add-comment" style="margin-left: 1rem;"
															(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">...View</a>
														<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
															*ngIf="!item.comments" class="add-newComment"
															[tooltip]="item.comments?'View And Add':''"
															(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">{{addCommentTitle}}</a>
													</div>
												</td>
												<td>
													<mat-form-field appearance="outline" class="custom-dropdown">
														<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
															[disabled]="(showChecklistAddBtn =='hide')"
															[ngModel]="item.stage" #stage
															(selectionChange)="changeStage(stage.value, item.jocbChecklistItemDetailsId)">
															<mat-option *ngFor="let stage of stages"
																[value]="stage.value">{{stage.title}}</mat-option>
														</mat-select>
													</mat-form-field>
												</td>
												<td>
													<mat-form-field appearance="outline" class="custom-dropdown">
														<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
															[disabled]="showChecklistAddBtn =='hide'"
															[ngModel]="item.status" #t
															(selectionChange)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
															<mat-option *ngFor="let st of trStatus"
																[value]="st.value">{{st.title}}</mat-option>
														</mat-select>
													</mat-form-field>
												</td>

												<td *ngIf="checklistType == 'Composite' && application?.isCOProject">
													<div class="button-switch">
														<input type="checkbox" id="switch-blue"
															[disabled]="showChecklistAddBtn =='hide'"
															(click)="changeTco($event,item.jocbChecklistItemDetailsId, false)"
															class="switch" [ngModel]="item.isRequiredForTCO" />
													</div>
												</td>
												<td style="cursor: pointer;">
													<span class="material-symbols-rounded" [matMenuTriggerFor]="menu"
														aria-label="Example icon-button with a menu"
														[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) : showChecklistAddBtn =='hide'}">more_vert</span>
													<mat-menu #menu="matMenu">
														<ng-container *ngIf="!isCustomerLoggedIn">
															<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
																(click)="openModalAddDoc(addJobDocument,item.jocbChecklistItemDetailsId)">

																<span>Create form</span>
															</button>
															<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
																(click)="openModalAddForm(addtransmittal)">

																<span>Create transmittal</span>
															</button>
															<button
																*ngIf="showChecklistAddBtn =='show' && (item.hasDocument == false)"
																mat-menu-item
																(click)="openModalAddDocUpload(upLoadJobDocument,item.jocbChecklistItemDetailsId,false)">

																<span>Upload Document</span>
															</button>
															<button
																*ngIf="(showChecklistAddBtn =='show') && (item.hasDocument == true)"
																mat-menu-item
																(click)="openModalViewDocUpload(jobDocument,item.jocbChecklistItemDetailsId, false)">

																<span>View Document</span>
															</button>
															<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
																(click)="openModalReferenceNote(ViewReferenceNote,item.jocbChecklistItemDetailsId,false)">

																<span>References</span>
															</button>
															<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
																(click)="openModalProgressNote(rfpprogressionnote,item.jocbChecklistItemDetailsId,false)">

																<span>Internal progress notes</span>
															</button>
															<button *ngIf="showChecklistDeleteBtn =='show'"
																mat-menu-item
																(click)="deleteChecklistItem(tplDeleteChecklistItem, item.jocbChecklistItemDetailsId,item.status)">

																<span>Delete</span>
															</button>
														</ng-container>
														<ng-container *ngIf="isCustomerLoggedIn && isShowClientNot">
															<button mat-menu-item
																(click)="addClientNote(clientnotes,item.jocbChecklistItemDetailsId)">
																<span>Client User Notes</span>
															</button>
														</ng-container>
													</mat-menu>
												</td>
											</tr>
										</ng-container>
										<ng-container *ngIf="!isHideCompleted">
											<tr cdkDrag
												[ngStyle]="item.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}">
												<td>
													<div class="checkbox form-check">
														<label class="form-check-label">
															<input type="checkbox"
																(change)="item.isChecked = !item.isChecked"
																class="form-check-input">
															<i class="input-helper"></i>
														</label>
													</div>
												</td>
												<td cdkDragHandle [ngClass]="{'disabled': isCustomerLoggedIn}">
													<span class="material-symbols-outlined"
														[ngClass]="{'disabled': isCustomerLoggedIn}">drag_indicator</span>
												</td>
												<td><span
														[innerHTML]="item.checklistItemName | highlight: searchedTerm"></span>
												</td>
												<td>
													<mat-form-field appearance="outline" class="custom-dropdown">
														<!-- <mat-label>Design Applicant</mat-label> -->
														<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
															[disabled]="showChecklistAddBtn =='hide'"
															[(ngModel)]="item.idDesignApplicant"
															(selectionChange)="changeApplicant($event,item.jocbChecklistItemDetailsId)">
															<mat-option *ngFor="let topping of jobContacts"
																[value]="topping.id">{{topping.contactName}} <span
																	*ngIf="topping.companyName">-</span>
																{{topping.companyName}}</mat-option>
														</mat-select>
													</mat-form-field>
												</td>
												<td>
													<mat-form-field appearance="outline" class="custom-dropdown">
														<!-- <mat-label>Inspector</mat-label> -->
														<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
															[disabled]="showChecklistAddBtn =='hide'"
															[(ngModel)]="item.idInspector"
															(selectionChange)="changeInspector($event,item.jocbChecklistItemDetailsId)">
															<mat-option *ngFor="let topping of jobContacts"
																[value]="topping.id">{{topping.contactName}} <span
																	*ngIf="topping.companyName">-</span>
																{{topping.companyName}}</mat-option>
														</mat-select>
													</mat-form-field>
												</td>
												<td class="comment">
													<div class="comment-box"><span
															[innerHTML]="item.comments | highlight: searchedTerm"></span>
														<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
															*ngIf="item.comments"
															[tooltip]="item.comments?'View And Add':''"
															class="add-comment" style="margin-left: 1rem;"
															(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">...View</a>
														<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
															*ngIf="!item.comments" class="add-newComment"
															[tooltip]="item.comments?'View And Add':''"
															(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">{{addCommentTitle}}</a>
													</div>
												</td>
												<td>
													<mat-form-field appearance="outline" class="custom-dropdown">
														<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
															[disabled]="(showChecklistAddBtn =='hide')"
															[ngModel]="item.stage" #stage
															(selectionChange)="changeStage(stage.value, item.jocbChecklistItemDetailsId)">
															<mat-option *ngFor="let stage of stages"
																[value]="stage.value">{{stage.title}}</mat-option>
														</mat-select>
													</mat-form-field>
												</td>
												<td>
													<mat-form-field appearance="outline" class="custom-dropdown">
														<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
															[disabled]="showChecklistAddBtn =='hide'"
															[ngModel]="item.status" #t
															(selectionChange)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
															<mat-option *ngFor="let st of trStatus"
																[value]="st.value">{{st.title}}</mat-option>
														</mat-select>
													</mat-form-field>
												</td>

												<td *ngIf="checklistType == 'Composite' && application?.isCOProject">
													<div class="button-switch">
														<input type="checkbox" id="switch-blue"
															[disabled]="showChecklistAddBtn =='hide'"
															(click)="changeTco($event,item.jocbChecklistItemDetailsId, false)"
															class="switch" [ngModel]="item.isRequiredForTCO" />
													</div>
												</td>
												<td style="cursor: pointer;">
													<span class="material-symbols-rounded" [matMenuTriggerFor]="menu"
														aria-label="Example icon-button with a menu"
														[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) : showChecklistAddBtn =='hide'}">more_vert</span>
													<mat-menu #menu="matMenu">
														<ng-container *ngIf="!isCustomerLoggedIn">
															<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
																(click)="openModalAddDoc(addJobDocument,item.jocbChecklistItemDetailsId)">

																<span>Create form</span>
															</button>
															<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
																(click)="openModalAddForm(addtransmittal)">

																<span>Create transmittal</span>
															</button>
															<button
																*ngIf="showChecklistAddBtn =='show' && (item.hasDocument == false)"
																mat-menu-item
																(click)="openModalAddDocUpload(upLoadJobDocument,item.jocbChecklistItemDetailsId,false)">

																<span>Upload Document</span>
															</button>
															<button
																*ngIf="(showChecklistAddBtn =='show') && (item.hasDocument == true)"
																mat-menu-item
																(click)="openModalViewDocUpload(jobDocument,item.jocbChecklistItemDetailsId, false)">

																<span>View Document</span>
															</button>
															<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
																(click)="openModalReferenceNote(ViewReferenceNote,item.jocbChecklistItemDetailsId,false)">

																<span>References</span>
															</button>
															<button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
																(click)="openModalProgressNote(rfpprogressionnote,item.jocbChecklistItemDetailsId,false)">

																<span>Internal progress notes</span>
															</button>
															<button *ngIf="showChecklistDeleteBtn =='show'"
																mat-menu-item
																(click)="deleteChecklistItem(tplDeleteChecklistItem, item.jocbChecklistItemDetailsId,item.status)">

																<span>Delete</span>
															</button>
														</ng-container>
														<ng-container *ngIf="isCustomerLoggedIn && isShowClientNot">
															<button mat-menu-item
																(click)="addClientNote(clientnotes,item.jocbChecklistItemDetailsId)">
																<span>Client User Notes</span>
															</button>
														</ng-container>
													</mat-menu>
												</td>
											</tr>
										</ng-container>
									</ng-container>
								</table>
							</ng-container>

						</mat-expansion-panel>
					</mat-accordion>
				</div>

			</mat-expansion-panel>

		</mat-accordion>
	</div>


	<div class="main" *ngIf="checklistType == 'Composite'">
		<ng-container *ngIf="mainChecklistArray.length > 0">
			<ng-container *ngFor="let application of mainChecklistArray; let i = index;">
				<ng-container *ngIf="application.isParentCheckList">
					<mat-accordion multi>
						<mat-expansion-panel class="header selected-checklist" #mapanel1="matExpansionPanel"
							hideToggle="true" [expanded]="application.isExpanded">
							<mat-expansion-panel-header
								(click)="manageAccordianParentExpand(application,'','',mapanel1)">
								<mat-panel-title class="h3">
									<span class="material-symbols-outlined r-90">expand_circle_down</span>
									<span>CC - {{application.compositeChecklistName}}</span>
									<span (click)="goToChecklist(application.jobChecklistHeaderId ,application.idJob)"
										class="mat-panel-grayTitle link-blue"> Project # <a
											href='javascript:void(0)'>{{application.idJob}}</a>
									</span>
									<input type="text" (keyup.enter)="updateHeaderInfo(application,$event)"
										[readonly]="isCustomerLoggedIn" (keydown.space)="$event.stopPropagation()"
										(keydown.tab)="$event.stopPropagation()" [value]="application?.others"
										class="form-control information-input"
										(focusout)="updateHeaderInfo(application,$event)" maxlength="50"
										placeholder="Information">
								</mat-panel-title>
								<span class="pull-right acts" *ngIf="!isCustomerLoggedIn">
									<i class="edit-icon pointer {{showChecklistAddBtn}}"
										*ngIf="checklistType == 'Composite'" (click)="mapanel1.close()"
										(click)="editGeneralFromCompositeChecklist(application.jobChecklistHeaderId)"
										tooltip="Edit" placement="left">
										<img src="./assets/images/edit_icon.svg" width="24px">
									</i>
								</span>

							</mat-expansion-panel-header>

							<div cdkDropList
								(cdkDropListDropped)="dropCompositeGroup($event,application.jobChecklistHeaderId)">
								<mat-accordion *ngIf="application.groups.length > 0" multi>
									<mat-expansion-panel #mapanel="matExpansionPanel" [expanded]="group.isExpanded"
										*ngFor="let group of application.groups;let groupIndex = index" cdkDrag
										class="sub-item">
										<mat-expansion-panel-header
											(click)="manageAccordianParentExpand(application,group.jobChecklistGroupId,groupIndex,mapanel,itemIndex)">
											<mat-panel-title>
												<span class="material-symbols-outlined"
													[ngClass]="{'disabled': isCustomerLoggedIn}"
													cdkDragHandle>drag_indicator</span>
												{{group.checkListGroupName}}
											</mat-panel-title>
											<ng-container *ngIf="group.checkListGroupType != 'PL'">
												<button class="btn btn-danger mr-2" *ngIf="!isCustomerLoggedIn"
													(click)="mapanel.close();deleteMultipleSelectedItems(deleteConfirmationMultipleItems,group)">Delete
													Items</button>
												<button class="blue-btn {{showChecklistAddBtn}}"
													*ngIf="!isCustomerLoggedIn" (click)="mapanel.close()"
													(click)="isOpen(group.jobChecklistGroupId,application.jobChecklistHeaderId)">Add
													Item</button>
											</ng-container>
										</mat-expansion-panel-header>

										<table *ngIf="group.checkListGroupType == 'General'" class="table" cdkDropList
											(cdkDropListDropped)="dropItemsComposite($event, group.jobChecklistGroupId, application.jobChecklistHeaderId)">
											<tr>
												<th style="width: 10px;"></th>
												<th style="width: 46px;"></th>
												<th>ITEM
												</th>
												<th>PARTY RESPONSIBLE</th>
												<th>COMMENTS</th>
												<th class="date_tab">TARGET DATE</th>
												<th class="status_tab">STATUS</th>
												<th class="TCO_tab"
													*ngIf="checklistType == 'Composite' && application?.isCOProject">
													TCO</th>
												<th></th>
											</tr>

											<ng-container *ngIf="isHideCompleted">
												<tr cdkDrag class="example-box-items" *ngFor="let item of group.item"
													[ngClass]="{'d-none': item.status == 3 || (isShowTco == true && item.isRequiredForTCO == false)}"
													[ngStyle]="item.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}">
													<td>
														<div class="checkbox form-check">
															<label class="form-check-label">
																<input (change)="item.isChecked = !item.isChecked"
																	type="checkbox" class="form-check-input">
																<i class="input-helper"></i>
															</label>
														</div>
													</td>
													<td cdkDragHandle [ngClass]="{'disabled': isCustomerLoggedIn}">
														<span class="material-symbols-outlined"
															[ngClass]="{'disabled': isCustomerLoggedIn}"
															cdkDragHandle>drag_indicator</span>
													</td>
													<td><span
															[innerHTML]="item.checklistItemName | highlight: searchedTerm"></span>
													</td>
													<td>
														<div class="partyResponsible">
															<mat-form-field appearance="outline"
																class="custom-dropdown w-50">
																<mat-select
																	[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																	[disabled]="(showChecklistAddBtn =='hide')"
																	[(ngModel)]='item.partyResponsible' #status
																	(selectionChange)="updatePartyResponcible(status.value, item.jocbChecklistItemDetailsId)">
																	<mat-option
																		*ngFor="let responsible of partyResponsible"
																		[value]="responsible.value">{{responsible.title}}</mat-option>
																</mat-select>
															</mat-form-field>
															<div class="contecytResponsible"
																*ngIf="item.partyResponsible == 'Contact'">
																<mat-form-field appearance="outline"
																	class="custom-dropdown w-92">
																	<mat-select
																		[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																		[(ngModel)]="item.idContact"
																		[disabled]="isCustomerLoggedIn"
																		(selectionChange)="changeContact($event,item.jocbChecklistItemDetailsId)">
																		<mat-option *ngFor="let topping of jobContacts"
																			[value]="topping.idContact">{{topping.contactName}}
																			<span *ngIf="topping.companyName">-</span>
																			{{topping.companyName}}</mat-option>
																	</mat-select>
																</mat-form-field>
															</div>

															<input *ngIf="item.partyResponsible == 'Other'" type="text"
																#text class="input name" id="name"
																(blur)="onEnter($event,item.jocbChecklistItemDetailsId, group.jobChecklistGroupId)"
																(keyup.enter)="onEnter($event,item.jocbChecklistItemDetailsId, group.jobChecklistGroupId)"
																[(ngModel)]='item.manualPartyResponsible'
																[disabled]="showChecklistAddBtn =='hide'"
																placeholder="Enter Name" name="name">
														</div>
													</td>

													<td class="comment">
														<div class="comment-box">
															<span
																[innerHTML]="item.comments | highlight: searchedTerm"></span>
															<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
																*ngIf="item.comments" class="add-comment"
																[tooltip]="item.comments?'View And Add':''"
																style="margin-left: 1rem;"
																(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">...View</a>
															<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																*ngIf="!item.comments" class="add-newComment"
																[tooltip]="item.comments?'View And Add':''"
																(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">{{addCommentTitle}}</a>
														</div>
													</td>
													<td>
														<div class="date-container">
															<input id="dueDate"
																[disabled]="showChecklistAddBtn =='hide'"
																class=" form-control" type="text" name="dueDate"
																#dueDate="ngModel" [ngModel]="item.dueDate"
																placeholder="mm-dd-yyyy" appDatepicker
																#datepicker="datepicker" (keydown)="onKeyPress($event)"
																(click)="getIdNumber(item.jocbChecklistItemDetailsId)"
																(dateEventEmitter)="dateEventEmitter($event, item.jocbChecklistItemDetailsId)" />
														</div>

													</td>
													<td>
														<mat-form-field appearance="outline" class="custom-dropdown">
															<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																[disabled]="showChecklistAddBtn =='hide'"
																[ngModel]="item.status" #t
																(selectionChange)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
																<mat-option *ngFor="let st of statusDropdown"
																	[value]="st.value">{{st.title}}</mat-option>
															</mat-select>
														</mat-form-field>
													</td>

													<td
														*ngIf="checklistType == 'Composite' && application?.isCOProject">
														<div class="button-switch">
															<input type="checkbox" id="switch-blue"
																[disabled]="showChecklistAddBtn =='hide'"
																(click)="changeTco($event,item.jocbChecklistItemDetailsId, false)"
																class="switch" [ngModel]="item.isRequiredForTCO" />
														</div>
													</td>
													<td style="cursor: pointer;">
														<span class="material-symbols-rounded"
															[matMenuTriggerFor]="menu"
															aria-label="Example icon-button with a menu"
															[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) :  showChecklistAddBtn =='hide'}">more_vert</span>
														<mat-menu #menu="matMenu">
															<ng-container *ngIf="!isCustomerLoggedIn">

																<button *ngIf="showChecklistAddBtn =='show'"
																	mat-menu-item
																	(click)="openModalAddDoc(addJobDocument,item.jocbChecklistItemDetailsId)">

																	<span>Create form</span>
																</button>
																<button *ngIf="showChecklistAddBtn =='show'"
																	mat-menu-item
																	(click)="openModalAddForm(addtransmittal)">

																	<span>Create transmittal</span>
																</button>
																<button
																	*ngIf="showChecklistAddBtn =='show' && (item.hasDocument == false)"
																	mat-menu-item
																	(click)="openModalAddDocUpload(upLoadJobDocument,item.jocbChecklistItemDetailsId,false)">

																	<span>Upload Document</span>
																</button>
																<button
																	*ngIf="(showChecklistAddBtn =='show') && (item.hasDocument == true)"
																	mat-menu-item
																	(click)="openModalViewDocUpload(jobDocument,item.jocbChecklistItemDetailsId, false)">

																	<span>View Document</span>
																</button>
																<button *ngIf="showChecklistAddBtn =='show'"
																	mat-menu-item
																	(click)="openModalReferenceNote(ViewReferenceNote,item.jocbChecklistItemDetailsId,false)">

																	<span>References</span>
																</button>
																<button *ngIf="showChecklistAddBtn =='show'"
																	mat-menu-item
																	(click)="openModalProgressNote(rfpprogressionnote,item.jocbChecklistItemDetailsId,false)">

																	<span>Internal progress notes</span>
																</button>
																<button *ngIf="showChecklistDeleteBtn =='show'"
																	mat-menu-item
																	(click)="deleteChecklistItem(tplDeleteChecklistItem, item.jocbChecklistItemDetailsId,item.status)">

																	<span>Delete</span>
																</button>
															</ng-container>
															<ng-container *ngIf="isCustomerLoggedIn && isShowClientNot">
																<button mat-menu-item
																	(click)="addClientNote(clientnotes,item.jocbChecklistItemDetailsId)">
																	<span>Client User Notes</span>
																</button>
															</ng-container>
														</mat-menu>
													</td>
												</tr>
											</ng-container>

											<ng-container *ngIf="!isHideCompleted">
												<tr cdkDrag class="example-box-items" *ngFor="let item of group.item"
													[ngClass]="{'d-none': (isShowTco == true && item.isRequiredForTCO == false)}"
													[ngStyle]="item.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}">
													<td>
														<div class="checkbox form-check">
															<label class="form-check-label">
																<input (change)="item.isChecked = !item.isChecked"
																	type="checkbox" class="form-check-input">
																<i class="input-helper"></i>
															</label>
														</div>
													</td>
													<td cdkDragHandle [ngClass]="{'disabled': isCustomerLoggedIn}">
														<span class="material-symbols-outlined"
															[ngClass]="{'disabled': isCustomerLoggedIn}"
															cdkDragHandle>drag_indicator</span>
													</td>
													<td><span
															[innerHTML]="item.checklistItemName | highlight: searchedTerm"></span>
													</td>
													<td>
														<div class="partyResponsible">
															<mat-form-field appearance="outline"
																class="custom-dropdown w-50">
																<mat-select
																	[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																	[disabled]="(showChecklistAddBtn =='hide')"
																	[(ngModel)]='item.partyResponsible' #status
																	(selectionChange)="updatePartyResponcible(status.value, item.jocbChecklistItemDetailsId)">
																	<mat-option
																		*ngFor="let responsible of partyResponsible"
																		[value]="responsible.value">{{responsible.title}}</mat-option>
																</mat-select>
															</mat-form-field>
															<div class="contecytResponsible"
																*ngIf="item.partyResponsible == 'Contact'">
																<mat-form-field appearance="outline"
																	class="custom-dropdown w-92">
																	<mat-select
																		[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																		[(ngModel)]="item.idContact"
																		[disabled]="isCustomerLoggedIn"
																		(selectionChange)="changeContact($event,item.jocbChecklistItemDetailsId)">
																		<mat-option *ngFor="let topping of jobContacts"
																			[value]="topping.idContact">{{topping.contactName}}
																			<span *ngIf="topping.companyName">-</span>
																			{{topping.companyName}}</mat-option>
																	</mat-select>
																</mat-form-field>
															</div>

															<input *ngIf="item.partyResponsible == 'Other'" type="text"
																#text class="input name" id="name"
																(blur)="onEnter($event,item.jocbChecklistItemDetailsId, group.jobChecklistGroupId)"
																(keyup.enter)="onEnter($event,item.jocbChecklistItemDetailsId, group.jobChecklistGroupId)"
																[(ngModel)]='item.manualPartyResponsible'
																[disabled]="showChecklistAddBtn =='hide'"
																placeholder="Enter Name" name="name">
														</div>
													</td>
													<td class="comment">
														<div class="comment-box">
															<span
																[innerHTML]="item.comments | highlight: searchedTerm"></span>
															<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
																*ngIf="item.comments" class="add-comment"
																[tooltip]="item.comments?'View And Add':''"
																style="margin-left: 1rem;"
																(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">...View</a>
															<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																*ngIf="!item.comments" class="add-newComment"
																[tooltip]="item.comments?'View And Add':''"
																(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">{{addCommentTitle}}</a>
														</div>
													</td>
													<td>
														<div class="date-container">
															<input id="dueDate"
																[disabled]="showChecklistAddBtn =='hide'"
																class=" form-control" type="text" name="dueDate"
																#dueDate="ngModel" [ngModel]="item.dueDate"
																placeholder="mm-dd-yyyy" appDatepicker
																#datepicker="datepicker" (keydown)="onKeyPress($event)"
																(click)="getIdNumber(item.jocbChecklistItemDetailsId)"
																(dateEventEmitter)="dateEventEmitter($event, item.jocbChecklistItemDetailsId)" />
														</div>

													</td>
													<td>
														<mat-form-field appearance="outline" class="custom-dropdown">
															<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																[disabled]="showChecklistAddBtn =='hide'"
																[ngModel]="item.status" #t
																(selectionChange)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
																<mat-option *ngFor="let st of statusDropdown"
																	[value]="st.value">{{st.title}}</mat-option>
															</mat-select>
														</mat-form-field>
													</td>

													<td
														*ngIf="checklistType == 'Composite' && application?.isCOProject">
														<div class="button-switch">
															<input type="checkbox" id="switch-blue"
																[disabled]="showChecklistAddBtn =='hide'"
																(click)="changeTco($event,item.jocbChecklistItemDetailsId, false)"
																class="switch" [ngModel]="item.isRequiredForTCO" />
														</div>
													</td>
													<td style="cursor: pointer;">
														<span class="material-symbols-rounded"
															[matMenuTriggerFor]="menu"
															aria-label="Example icon-button with a menu"
															[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) : showChecklistAddBtn =='hide'}">more_vert</span>
														<mat-menu #menu="matMenu">
															<ng-container *ngIf="!isCustomerLoggedIn">
																<button *ngIf="showChecklistAddBtn =='show'"
																	mat-menu-item
																	(click)="openModalAddDoc(addJobDocument,item.jocbChecklistItemDetailsId)">
																	<span>Create form</span>
																</button>
																<button *ngIf="showChecklistAddBtn =='show'"
																	mat-menu-item
																	(click)="openModalAddForm(addtransmittal)">
																	<span>Create transmittal</span>
																</button>
																<button
																	*ngIf="showChecklistAddBtn =='show' && (item.hasDocument == false)"
																	mat-menu-item
																	(click)="openModalAddDocUpload(upLoadJobDocument,item.jocbChecklistItemDetailsId,false)">
																	<span>Upload Document</span>
																</button>
																<button
																	*ngIf="(showChecklistAddBtn =='show') && (item.hasDocument == true)"
																	mat-menu-item
																	(click)="openModalViewDocUpload(jobDocument,item.jocbChecklistItemDetailsId, false)">

																	<span>View Document</span>
																</button>
																<button *ngIf="showChecklistAddBtn =='show'"
																	mat-menu-item
																	(click)="openModalReferenceNote(ViewReferenceNote,item.jocbChecklistItemDetailsId,false)">
																	<span>References</span>
																</button>
																<button *ngIf="showChecklistAddBtn =='show'"
																	mat-menu-item
																	(click)="openModalProgressNote(rfpprogressionnote,item.jocbChecklistItemDetailsId,false)">
																	<span>Internal progress notes</span>
																</button>
																<button *ngIf="showChecklistDeleteBtn =='show'"
																	mat-menu-item
																	(click)="deleteChecklistItem(tplDeleteChecklistItem, item.jocbChecklistItemDetailsId,item.status)">
																	<span>Delete</span>
																</button>
															</ng-container>

															<ng-container *ngIf="isCustomerLoggedIn && isShowClientNot">
																<button mat-menu-item
																	(click)="addClientNote(clientnotes,item.jocbChecklistItemDetailsId)">
																	<span>Client User Notes</span>
																</button>
															</ng-container>
														</mat-menu>
													</td>
												</tr>
											</ng-container>

										</table>

										<ng-container *ngIf="group.checkListGroupType == 'PL'">
											<div cdkDropList
												(cdkDropListDropped)="dropItemsComposite($event, group.jobChecklistGroupId, application.jobChecklistHeaderId)">
												<mat-accordion multi>
													<mat-expansion-panel #mapanel="matExpansionPanel"
														[expanded]="item.isExpanded"
														(opened)="beforePanelOpened(application.jobChecklistHeaderId, group.jobChecklistGroupId, item.idChecklistItem)"
														(closed)="beforePanelClosed(panel)" class="sub-item"
														*ngFor="let item of group.item;let itemIndex = index">
														<mat-expansion-panel-header
															(click)="manageAccordianParentExpand(application,group.jobChecklistGroupId,groupIndex,mapanel,itemIndex)">
															<mat-panel-title>
																<div class="floor-title">
																	<span
																		class="material-symbols-outlined r-90">expand_circle_down</span>
																	Floor: <span> {{item.checklistItemName ||
																		item.floorNumber}}</span>
																	<div class="inspections-label" *ngIf="item.status">
																		<span
																			class="material-symbols-rounded fill">check_circle</span>
																		All Inspections Complete
																	</div>
																</div>
															</mat-panel-title>
															<button class="btn btn-danger mr-2"
																*ngIf="!isCustomerLoggedIn"
																(click)="mapanel.close();deleteMultipleSelectedItems(deleteConfirmationMultipleItems,item)">
																Delete Items</button>
															<button class="blue-btn" *ngIf="!isCustomerLoggedIn"
																(click)="mapanel.close();addInspection(group.jobChecklistGroupId,item.idJobPlumbingCheckListFloors,application.idWorkPermits)">Add
																Inspection</button>
														</mat-expansion-panel-header>

														<table class="table">
															<tr>
																<th style="width: 10px;"></th>
																<th>INSPECTION TYPE</th>
																<th>COMMENTS</th>
																<th class="status_tab">STATUS</th>
																<th
																	*ngIf="checklistType == 'Composite' && application?.isCOProject">
																	TCO</th>
																<th></th>
															</tr>
															<ng-container
																*ngFor="let Plitem of item.details; let i= index">
																<ng-container
																	*ngIf="Plitem.idJobPlumbingInspection != null">
																	<ng-container *ngIf="isHideCompleted">
																		<tr
																			[ngClass]="{'d-none': Plitem.result == '1' || (isShowTco == true && Plitem.isRequiredForTCO == false)}">
																			<td style="padding-left: 14px;">
																				<div class="checkbox form-check">
																					<label class="form-check-label">
																						<input
																							(change)="Plitem.isChecked = !Plitem.isChecked"
																							type="checkbox"
																							class="form-check-input">
																						<i class="input-helper"></i>
																					</label>
																				</div>
																			</td>
																			<td><span
																					[innerHTML]="Plitem.inspectionPermit | highlight: searchedTerm"></span>
																			</td>
																			<td>
																				<div class="comment-box-pl">
																					<span
																						[innerHTML]="Plitem.plComments | highlight: searchedTerm"></span>
																					<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
																						class="add-comment"
																						*ngIf="Plitem.plComments"
																						[tooltip]="Plitem.plComments?'View And Add':''"
																						style="margin-left: 1rem;"
																						(click)="isCommentOpen(Plitem.plComments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId, true, Plitem.idJobPlumbingInspection)">...View</a>
																					<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																						*ngIf="!Plitem.plComments"
																						class="add-newComment"
																						[tooltip]="Plitem.plComments?'View And Add':''"
																						(click)="isCommentOpen(Plitem.plComments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId, true, Plitem.idJobPlumbingInspection)">{{addCommentTitle}}</a>
																				</div>
																			</td>
																			<td>
																				<!-- <select class="select" #t
																					[disabled]="showChecklistAddBtn =='hide'"
																					[ngModel]="Plitem.result"
																					(change)="updatePlStatus(t.value, Plitem.idJobPlumbingInspection)">
																					<option value="1">Pass</option>
																					<option value="2">Failed</option>
																					<option value="3">Pending</option>
																					<option value="4">NA</option>
																				</select> -->
																				<mat-form-field appearance="outline"
																					class="custom-dropdown">
																					<mat-select
																						[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																						[disabled]="showChecklistAddBtn =='hide'"
																						[ngModel]="Plitem.result" #t
																						(selectionChange)="updatePlStatus(t.value, Plitem.idJobPlumbingInspection)">
																						<mat-option
																							*ngFor="let status of plStatus"
																							[value]="status.value">{{status.title}}</mat-option>
																					</mat-select>
																				</mat-form-field>
																			</td>
																			<td
																				*ngIf="checklistType == 'Composite' && application?.isCOProject">
																				<div class="button-switch">
																					<input type="checkbox"
																						[disabled]="showChecklistAddBtn =='hide'"
																						id="switch-blue"
																						(click)="changeTcoForPlumbing($event,Plitem.idJobPlumbingInspection, true)"
																						class="switch"
																						[ngModel]="Plitem.isRequiredForTCO" />
																				</div>
																			</td>
																			<td style="cursor: pointer;">
																				<span class="material-symbols-rounded"
																					[matMenuTriggerFor]="menu"
																					aria-label="Example icon-button with a menu"
																					[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) : showChecklistAddBtn =='hide'}">more_vert</span>
																				<mat-menu #menu="matMenu">

																					<ng-container
																						*ngIf="!isCustomerLoggedIn">

																						<button
																							*ngIf="showChecklistAddBtn =='show' && (Plitem.hasDocument == false)"
																							mat-menu-item
																							(click)="openModalAddDocUpload(upLoadJobDocument,Plitem.idJobPlumbingInspection,true)">

																							<span>Upload Document</span>
																						</button>
																						<button
																							*ngIf="(showChecklistAddBtn =='show') && (Plitem.hasDocument == true)"
																							mat-menu-item
																							(click)="openModalViewDocUpload(jobDocument,Plitem.idJobPlumbingInspection, true)">

																							<span>View Document</span>
																						</button>
																						<button
																							*ngIf="showChecklistAddBtn =='show'"
																							mat-menu-item
																							(click)="openModalReferenceNote(ViewReferenceNote,Plitem.idJobPlumbingInspection,true)">

																							<span>References</span>
																						</button>
																						<button
																							*ngIf="showChecklistAddBtn =='show'"
																							mat-menu-item
																							(click)="openModalProgressNote(rfpprogressionnote,application.jobChecklistHeaderId,true,Plitem.idJobPlumbingInspection)">

																							<span>Internal progress
																								notes</span>
																						</button>
																						<button
																							*ngIf="showChecklistDeleteBtn =='show'"
																							mat-menu-item
																							(click)="deleteChecklistItemPL(PlItemDelete, Plitem.idJobPlumbingInspection,Plitem.result)">

																							<span>Delete</span>
																						</button>
																					</ng-container>
																					<ng-container
																						*ngIf="isCustomerLoggedIn && isShowClientNot">
																						<button mat-menu-item
																							(click)="addClientNote(clientnotes,Plitem.idJobPlumbingInspection,'PL')">
																							<span>Client User
																								Notes</span>
																						</button>
																					</ng-container>
																				</mat-menu>
																			</td>
																		</tr>
																	</ng-container>
																	<ng-container *ngIf="!isHideCompleted">
																		<tr
																			[ngClass]="{'d-none': (isShowTco == true && Plitem.isRequiredForTCO == false)}">
																			<td style="padding-left: 14px;">
																				<div class="checkbox form-check">
																					<label class="form-check-label">
																						<input
																							(change)="Plitem.isChecked = !Plitem.isChecked"
																							type="checkbox"
																							class="form-check-input">
																						<i class="input-helper"></i>
																					</label>
																				</div>
																			</td>
																			<td><span
																					[innerHTML]="Plitem.inspectionPermit | highlight: searchedTerm"></span>
																			</td>
																			<td>
																				<div class="comment-box-pl">
																					<span
																						[innerHTML]="Plitem.plComments | highlight: searchedTerm"></span>
																					<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
																						class="add-comment"
																						*ngIf="Plitem.plComments"
																						[tooltip]="Plitem.plComments?'View And Add':''"
																						style="margin-left: 1rem;"
																						(click)="isCommentOpen(Plitem.plComments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId, true, Plitem.idJobPlumbingInspection)">...View</a>
																					<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																						*ngIf="!Plitem.plComments"
																						class="add-newComment"
																						[tooltip]="Plitem.plComments?'View And Add':''"
																						(click)="isCommentOpen(Plitem.plComments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId, true, Plitem.idJobPlumbingInspection)">{{addCommentTitle}}</a>
																				</div>
																			</td>
																			<td>
																				<!-- <select class="select" #t
																					[disabled]="showChecklistAddBtn =='hide'"
																					[ngModel]="Plitem.result"
																					(change)="updatePlStatus(t.value, Plitem.idJobPlumbingInspection)">
																					<option value="1">Pass</option>
																					<option value="2">Failed</option>
																					<option value="3">Pending</option>
																					<option value="4">NA</option>
																				</select> -->
																				<mat-form-field appearance="outline"
																					class="custom-dropdown">
																					<mat-select
																						[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																						[disabled]="showChecklistAddBtn =='hide'"
																						[ngModel]="Plitem.result" #t
																						(selectionChange)="updatePlStatus(t.value, Plitem.idJobPlumbingInspection)">
																						<mat-option
																							*ngFor="let status of plStatus"
																							[value]="status.value">{{status.title}}</mat-option>
																					</mat-select>
																				</mat-form-field>
																			</td>
																			<td
																				*ngIf="checklistType == 'Composite' && application?.isCOProject">
																				<div class="button-switch">
																					<input type="checkbox"
																						[disabled]="showChecklistAddBtn =='hide'"
																						id="switch-blue"
																						(click)="changeTcoForPlumbing($event,Plitem.idJobPlumbingInspection, true)"
																						class="switch"
																						[ngModel]="Plitem.isRequiredForTCO" />
																				</div>
																			</td>
																			<td style="cursor: pointer;">
																				<span class="material-symbols-rounded"
																					[matMenuTriggerFor]="menu"
																					aria-label="Example icon-button with a menu"
																					[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) : showChecklistAddBtn =='hide'}">more_vert</span>
																				<mat-menu #menu="matMenu">
																					<ng-container
																						*ngIf="!isCustomerLoggedIn">

																						<button
																							*ngIf="showChecklistAddBtn =='show' && (Plitem.hasDocument == false)"
																							mat-menu-item
																							(click)="openModalAddDocUpload(upLoadJobDocument,Plitem.idJobPlumbingInspection,true)">

																							<span>Upload Document</span>
																						</button>
																						<button
																							*ngIf="(showChecklistAddBtn =='show') && (Plitem.hasDocument == true)"
																							mat-menu-item
																							(click)="openModalViewDocUpload(jobDocument,Plitem.idJobPlumbingInspection, true)">

																							<span>View Document</span>
																						</button>
																						<button
																							*ngIf="showChecklistAddBtn =='show'"
																							mat-menu-item
																							(click)="openModalReferenceNote(ViewReferenceNote,Plitem.idJobPlumbingInspection,true)">

																							<span>References</span>
																						</button>
																						<button
																							*ngIf="showChecklistAddBtn =='show'"
																							mat-menu-item
																							(click)="openModalProgressNote(rfpprogressionnote,application.jobChecklistHeaderId,true,Plitem.idJobPlumbingInspection)">

																							<span>Internal progress
																								notes</span>
																						</button>
																						<button
																							*ngIf="showChecklistDeleteBtn =='show'"
																							mat-menu-item
																							(click)="deleteChecklistItemPL(PlItemDelete, Plitem.idJobPlumbingInspection,Plitem.result)">

																							<span>Delete</span>
																						</button>
																					</ng-container>
																					<ng-container
																						*ngIf="isCustomerLoggedIn && isShowClientNot">
																						<button mat-menu-item
																							(click)="addClientNote(clientnotes,Plitem.idJobPlumbingInspection,'PL')">
																							<span>Client User
																								Notes</span>
																						</button>
																					</ng-container>
																				</mat-menu>
																			</td>
																		</tr>
																	</ng-container>
																</ng-container>
															</ng-container>
														</table>
													</mat-expansion-panel>
												</mat-accordion>
											</div>
										</ng-container>

										<ng-container *ngIf="group.checkListGroupType == 'TR'">
											<table class="table" cdkDropList
												(cdkDropListDropped)="dropItemsComposite($event, group.jobChecklistGroupId, application.jobChecklistHeaderId)">
												<tr>
													<th style="width: 10px;"></th>
													<th style="width: 46px;"></th>
													<th>ITEM NAME </th>
													<th>DESIGN APPLICANT </th>
													<th>INSPECTOR </th>
													<th>COMMENTS</th>
													<th>STAGE </th>
													<th class="status_tab">STATUS </th>
													<th class="TCO_tab"
														*ngIf="checklistType == 'Composite' && application?.isCOProject">
														TCO
													</th>
													<th></th>
												</tr>

												<ng-container *ngFor="let item of group.item">
													<ng-container *ngIf="isHideCompleted">
														<tr cdkDrag
															[ngClass]="{'d-none': item.status == 3 || (isShowTco == true && item.isRequiredForTCO == false)}"
															[ngStyle]="item.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}">
															<td>
																<div class="checkbox form-check">
																	<label class="form-check-label">
																		<input
																			(change)="item.isChecked = !item.isChecked"
																			type="checkbox" class="form-check-input">
																		<i class="input-helper"></i>
																	</label>
																</div>
															</td>
															<td cdkDragHandle
																[ngClass]="{'disabled': isCustomerLoggedIn}">
																<span class="material-symbols-outlined"
																	[ngClass]="{'disabled': isCustomerLoggedIn}"
																	cdkDragHandle>drag_indicator</span>
															</td>
															<td><span
																	[innerHTML]="item.checklistItemName | highlight: searchedTerm"></span>
															</td>
															<td>
																<mat-form-field appearance="outline"
																	class="custom-dropdown">
																	<!-- <mat-label>Design Applicant</mat-label> -->
																	<mat-select
																		[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																		[disabled]="showChecklistAddBtn =='hide'"
																		[(ngModel)]="item.idDesignApplicant"
																		(selectionChange)="changeApplicant($event,item.jocbChecklistItemDetailsId)">
																		<mat-option *ngFor="let topping of jobContacts"
																			[value]="topping.id">{{topping.contactName}}
																			<span *ngIf="topping.companyName">-</span>
																			{{topping.companyName}}</mat-option>
																	</mat-select>
																</mat-form-field>
															</td>
															<td>
																<mat-form-field appearance="outline"
																	class="custom-dropdown">
																	<!-- <mat-label>Inspector</mat-label> -->
																	<mat-select
																		[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																		[disabled]="showChecklistAddBtn =='hide'"
																		[(ngModel)]="item.idInspector"
																		(selectionChange)="changeInspector($event,item.jocbChecklistItemDetailsId)">
																		<mat-option *ngFor="let topping of jobContacts"
																			[value]="topping.id">{{topping.contactName}}
																			<span *ngIf="topping.companyName">-</span>
																			{{topping.companyName}}</mat-option>
																	</mat-select>
																</mat-form-field>
															</td>
															<td class="comment">
																<div class="comment-box">
																	<span
																		[innerHTML]="item.comments | highlight: searchedTerm"></span>
																	<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
																		class="add-comment" *ngIf="item.comments"
																		[tooltip]="item.comments?'View And Add':''"
																		style="margin-left: 1rem;"
																		(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">...View</a>
																	<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																		*ngIf="!item.comments" class="add-newComment"
																		[tooltip]="item.comments?'View And Add':''"
																		(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">{{addCommentTitle}}</a>
																</div>
															</td>
															<td>
																<!-- <select class="select"
																	[disabled]="showChecklistAddBtn =='hide'" #stage
																	[ngModel]="item.stage"
																	(change)="changeStage(stage.value, item.jocbChecklistItemDetailsId)">
																	<option value="1">Prior to Approval</option>
																	<option value="2">Prior to Permit</option>
																	<option value="3">Prior to Sign Off</option>
																</select> -->
																<mat-form-field appearance="outline"
																	class="custom-dropdown">
																	<mat-select
																		[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																		[disabled]="(showChecklistAddBtn =='hide')"
																		[ngModel]="item.stage" #stage
																		(selectionChange)="changeStage(stage.value, item.jocbChecklistItemDetailsId)">
																		<mat-option *ngFor="let stage of stages"
																			[value]="stage.value">{{stage.title}}</mat-option>
																	</mat-select>
																</mat-form-field>
															</td>
															<td>
																<!-- <select class="select" #t
																	[disabled]="showChecklistAddBtn =='hide'"
																	[ngModel]="item.status"
																	(change)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
																	<option value="1">Open</option>
																	<option value="3">Completed</option>
																</select> -->
																<mat-form-field appearance="outline"
																	class="custom-dropdown">
																	<mat-select
																		[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																		[disabled]="showChecklistAddBtn =='hide'"
																		[ngModel]="item.status" #t
																		(selectionChange)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
																		<mat-option *ngFor="let st of trStatus"
																			[value]="st.value">{{st.title}}</mat-option>
																	</mat-select>
																</mat-form-field>
															</td>
															<td
																*ngIf="checklistType == 'Composite' && application?.isCOProject">
																<div class="button-switch">
																	<input type="checkbox"
																		[disabled]="showChecklistAddBtn =='hide'"
																		id="switch-blue"
																		(click)="changeTco($event,item.jocbChecklistItemDetailsId, false)"
																		class="switch"
																		[ngModel]="item.isRequiredForTCO" />
																</div>
															</td>
															<td style="cursor: pointer;">
																<span class="material-symbols-rounded"
																	[matMenuTriggerFor]="menu"
																	aria-label="Example icon-button with a menu"
																	[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) : showChecklistAddBtn =='hide'}">more_vert</span>
																<mat-menu #menu="matMenu">
																	<ng-container *ngIf="!isCustomerLoggedIn">

																		<button *ngIf="showChecklistAddBtn =='show'"
																			mat-menu-item
																			(click)="openModalAddDoc(addJobDocument,item.jocbChecklistItemDetailsId)">

																			<span>Create form</span>
																		</button>
																		<button *ngIf="showChecklistAddBtn =='show'"
																			mat-menu-item
																			(click)="openModalAddForm(addtransmittal)">

																			<span>Create transmittal</span>
																		</button>
																		<button
																			*ngIf="showChecklistAddBtn =='show' && (item.hasDocument == false)"
																			mat-menu-item
																			(click)="openModalAddDocUpload(upLoadJobDocument,item.jocbChecklistItemDetailsId,false)">

																			<span>Upload Document</span>
																		</button>
																		<button
																			*ngIf="(showChecklistAddBtn =='show') && (item.hasDocument == true)"
																			mat-menu-item
																			(click)="openModalViewDocUpload(jobDocument,item.jocbChecklistItemDetailsId, false)">

																			<span>View Document</span>
																		</button>
																		<button *ngIf="showChecklistAddBtn =='show'"
																			mat-menu-item
																			(click)="openModalReferenceNote(ViewReferenceNote,item.jocbChecklistItemDetailsId,false)">

																			<span>References</span>
																		</button>
																		<button *ngIf="showChecklistAddBtn =='show'"
																			mat-menu-item
																			(click)="openModalProgressNote(rfpprogressionnote,item.jocbChecklistItemDetailsId,false)">

																			<span>Internal progress notes</span>
																		</button>
																		<button *ngIf="showChecklistDeleteBtn =='show'"
																			mat-menu-item
																			(click)="deleteChecklistItem(tplDeleteChecklistItem, item.jocbChecklistItemDetailsId,item.status)">

																			<span>Delete</span>
																		</button>
																	</ng-container>
																	<ng-container
																		*ngIf="isCustomerLoggedIn && isShowClientNot">
																		<button mat-menu-item
																			(click)="addClientNote(clientnotes,item.jocbChecklistItemDetailsId)">
																			<span>Client User Notes</span>
																		</button>
																	</ng-container>
																</mat-menu>
															</td>
														</tr>
													</ng-container>
													<ng-container *ngIf="!isHideCompleted">
														<tr cdkDrag
															[ngClass]="{'d-none': (isShowTco == true && item.isRequiredForTCO == false)}"
															[ngStyle]="item.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}">
															<td>
																<div class="checkbox form-check">
																	<label class="form-check-label">
																		<input
																			(change)="item.isChecked = !item.isChecked"
																			type="checkbox" class="form-check-input">
																		<i class="input-helper"></i>
																	</label>
																</div>
															</td>
															<td cdkDragHandle
																[ngClass]="{'disabled': isCustomerLoggedIn}">
																<span class="material-symbols-outlined"
																	[ngClass]="{'disabled': isCustomerLoggedIn}"
																	cdkDragHandle>drag_indicator</span>
															</td>
															<td><span
																	[innerHTML]="item.checklistItemName | highlight: searchedTerm"></span>
															</td>
															<td>
																<mat-form-field appearance="outline"
																	class="custom-dropdown">
																	<!-- <mat-label>Design Applicant</mat-label> -->
																	<mat-select
																		[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																		[disabled]="showChecklistAddBtn =='hide'"
																		[(ngModel)]="item.idDesignApplicant"
																		(selectionChange)="changeApplicant($event,item.jocbChecklistItemDetailsId)">
																		<mat-option *ngFor="let topping of jobContacts"
																			[value]="topping.id">{{topping.contactName}}
																			<span *ngIf="topping.companyName">-</span>
																			{{topping.companyName}}</mat-option>
																	</mat-select>
																</mat-form-field>
															</td>
															<td>
																<mat-form-field appearance="outline"
																	class="custom-dropdown">
																	<!-- <mat-label>Inspector</mat-label> -->
																	<mat-select
																		[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																		[disabled]="showChecklistAddBtn =='hide'"
																		[(ngModel)]="item.idInspector"
																		(selectionChange)="changeInspector($event,item.jocbChecklistItemDetailsId)">
																		<mat-option *ngFor="let topping of jobContacts"
																			[value]="topping.id">{{topping.contactName}}
																			<span *ngIf="topping.companyName">-</span>
																			{{topping.companyName}}</mat-option>
																	</mat-select>
																</mat-form-field>
															</td>
															<td class="comment">
																<div class="comment-box">
																	<span
																		[innerHTML]="item.comments | highlight: searchedTerm"></span>
																	<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
																		class="add-comment" *ngIf="item.comments"
																		[tooltip]="item.comments?'View And Add':''"
																		style="margin-left: 1rem;"
																		(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">...View</a>
																	<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																		*ngIf="!item.comments" class="add-newComment"
																		[tooltip]="item.comments?'View And Add':''"
																		(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">{{addCommentTitle}}</a>
																</div>
															</td>
															<td>
																<!-- <select class="select"
																	[disabled]="showChecklistAddBtn =='hide'" #stage
																	[ngModel]="item.stage"
																	(change)="changeStage(stage.value, item.jocbChecklistItemDetailsId)">
																	<option value="1">Prior to Approval</option>
																	<option value="2">Prior to Permit</option>
																	<option value="3">Prior to Sign Off</option>
																</select> -->
																<mat-form-field appearance="outline"
																	class="custom-dropdown">
																	<mat-select
																		[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																		[disabled]="(showChecklistAddBtn =='hide')"
																		[ngModel]="item.stage" #stage
																		(selectionChange)="changeStage(stage.value, item.jocbChecklistItemDetailsId)">
																		<mat-option *ngFor="let stage of stages"
																			[value]="stage.value">{{stage.title}}</mat-option>
																	</mat-select>
																</mat-form-field>
															</td>
															<td>
																<!-- <select class="select" #t
																	[disabled]="showChecklistAddBtn =='hide'"
																	[ngModel]="item.status"
																	(change)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
																	<option value="1">Open</option>
																	<option value="3">Completed</option>
																</select> -->
																<mat-form-field appearance="outline"
																	class="custom-dropdown">
																	<mat-select
																		[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																		[disabled]="showChecklistAddBtn =='hide'"
																		[ngModel]="item.status" #t
																		(selectionChange)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
																		<mat-option *ngFor="let st of trStatus"
																			[value]="st.value">{{st.title}}</mat-option>
																	</mat-select>
																</mat-form-field>
															</td>
															<td
																*ngIf="checklistType == 'Composite' && application?.isCOProject">
																<div class="button-switch">
																	<input type="checkbox"
																		[disabled]="showChecklistAddBtn =='hide'"
																		id="switch-blue"
																		(click)="changeTco($event,item.jocbChecklistItemDetailsId, false)"
																		class="switch"
																		[ngModel]="item.isRequiredForTCO" />
																</div>
															</td>
															<td style="cursor: pointer;">
																<span class="material-symbols-rounded"
																	[matMenuTriggerFor]="menu"
																	aria-label="Example icon-button with a menu"
																	[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) : showChecklistAddBtn =='hide'}">more_vert</span>
																<mat-menu #menu="matMenu">
																	<ng-container *ngIf="!isCustomerLoggedIn">
																		<button *ngIf="showChecklistAddBtn =='show'"
																			mat-menu-item
																			(click)="openModalAddDoc(addJobDocument,item.jocbChecklistItemDetailsId)">

																			<span>Create form</span>
																		</button>
																		<button *ngIf="showChecklistAddBtn =='show'"
																			mat-menu-item
																			(click)="openModalAddForm(addtransmittal)">

																			<span>Create transmittal</span>
																		</button>
																		<button
																			*ngIf="showChecklistAddBtn =='show' && (item.hasDocument == false)"
																			mat-menu-item
																			(click)="openModalAddDocUpload(upLoadJobDocument,item.jocbChecklistItemDetailsId,false)">

																			<span>Upload Document</span>
																		</button>
																		<button
																			*ngIf="(showChecklistAddBtn =='show') && (item.hasDocument == true)"
																			mat-menu-item
																			(click)="openModalViewDocUpload(jobDocument,item.jocbChecklistItemDetailsId, false)">

																			<span>View Document</span>
																		</button>
																		<button *ngIf="showChecklistAddBtn =='show'"
																			mat-menu-item
																			(click)="openModalReferenceNote(ViewReferenceNote,item.jocbChecklistItemDetailsId,false)">

																			<span>References</span>
																		</button>
																		<button *ngIf="showChecklistAddBtn =='show'"
																			mat-menu-item
																			(click)="openModalProgressNote(rfpprogressionnote,item.jocbChecklistItemDetailsId,false)">

																			<span>Internal progress notes</span>
																		</button>
																		<button *ngIf="showChecklistDeleteBtn =='show'"
																			mat-menu-item
																			(click)="deleteChecklistItem(tplDeleteChecklistItem, item.jocbChecklistItemDetailsId,item.status)">

																			<span>Delete</span>
																		</button>
																	</ng-container>
																	<ng-container
																		*ngIf="isCustomerLoggedIn && isShowClientNot">
																		<button mat-menu-item
																			(click)="addClientNote(clientnotes,item.jocbChecklistItemDetailsId)">
																			<span>Client User Notes</span>
																		</button>
																	</ng-container>
																</mat-menu>
															</td>
														</tr>
													</ng-container>
												</ng-container>
											</table>
										</ng-container>

									</mat-expansion-panel>
								</mat-accordion>
							</div>

						</mat-expansion-panel>
					</mat-accordion>
				</ng-container>
			</ng-container>
		</ng-container>


		<div cdkDropList (cdkDropListDropped)="mainListDrop($event)">
			<ng-container *ngIf="mainChecklistArray.length > 0">
				<ng-container *ngFor="let application of mainChecklistArray; let i = index;">
					<ng-container *ngIf="!application.isParentCheckList">
						<mat-accordion multi>
							<mat-expansion-panel class="header" cdkDrag #mapanel1="matExpansionPanel" hideToggle="true"
								[expanded]="application.isExpanded">
								<mat-expansion-panel-header
									(click)="manageAccordianParentExpand(application,'','',mapanel1)">
									<mat-panel-title class="h3">
										<span class="material-symbols-outlined"
											[ngClass]="{'disabled': isCustomerLoggedIn}"
											cdkDragHandle>drag_indicator</span>
										<span class="material-symbols-outlined r-90">expand_circle_down</span>
										<span>{{application.compositeChecklistName}}</span>
										<span
											(click)="goToChecklist(application.jobChecklistHeaderId ,application.idJob)"
											class="mat-panel-grayTitle link-blue"> Project # <a
												href='javascript:void(0)'>{{application.idJob}}</a>
										</span>
										<input type="text" (keyup.enter)="updateHeaderInfo(application,$event)"
											[readonly]="isCustomerLoggedIn" (keydown.space)="$event.stopPropagation()"
											(keydown.tab)="$event.stopPropagation()" [value]="application?.others"
											class="form-control information-input"
											(focusout)="updateHeaderInfo(application,$event)" maxlength="50"
											placeholder="Information">
									</mat-panel-title>
									<!-- <button class="blue-btn" *ngIf="checklistType == 'Composite'" (click)="goToChecklist()" >Go To CheckList</button> -->
									<span class="pull-right acts" *ngIf="!isCustomerLoggedIn">
										<i class="edit-icon pointer"
											(click)="mapanel1.close();editGeneralFromCompositeChecklist(application.jobChecklistHeaderId)"
											tooltip="Edit" placement="left">
											<img src="./assets/images/edit_icon.svg" width="24px">
										</i>
										<i class="material-icon {{showChecklistAddBtn}}"
											(click)="mapanel1.close();unlinkChecklist(application.jobChecklistHeaderId)"
											tooltip="Unlink Checklist" placement="left">
											<span class="material-symbols-rounded">pill_off</span>
										</i>

										<!--<i *ngIf="checklistType == 'General'" class="fa fa-lg fa-edit pointer" (click)="mapanel1.close()" (click)="editChecklist(application.jobChecklistHeaderId)" tooltip="Edit"
								placement="left"></i>
							<i *ngIf="checklistType == 'Composite'" class="fa fa-lg fa-edit pointer" (click)="mapanel1.close()" (click)="editCompositeChecklist(application.idCompositeChecklist)" tooltip="Edit"
								placement="left"></i>
							<i *ngIf="checklistType == 'General'" class="fa fa-lg fa-trash pointer" (click)="mapanel1.close()" (click)="deleteChecklist(tplDeleteChecklist,application.jobChecklistHeaderId)" tooltip="Delete"
								placement="left"></i>
								<i *ngIf="checklistType == 'Composite'" class="fa fa-lg fa-trash pointer" (click)="mapanel1.close()" (click)="deleteChecklist(tplDeleteChecklist,application.idCompositeChecklist)" tooltip="Delete"
								placement="left"></i> -->
									</span>

								</mat-expansion-panel-header>

								<div cdkDropList
									(cdkDropListDropped)="dropCompositeGroup($event,application.jobChecklistHeaderId)">
									<!-- <mat-accordion *ngIf="application.groups.length > 0">
							<mat-expansion-panel
								(opened)="beforePanelOpened(application.jobChecklistHeaderId, group.jobChecklistGroupId)"
								(closed)="beforePanelClosed(panel)" #mapanel="matExpansionPanel" [expanded]="group.isExpanded"
								*ngFor="let group of application.groups" cdkDrag class="sub-item"> -->
									<mat-accordion *ngIf="application.groups.length > 0" multi>
										<mat-expansion-panel #mapanel="matExpansionPanel" [expanded]="group.isExpanded"
											*ngFor="let group of application.groups;let groupIndex = index" cdkDrag
											class="sub-item">
											<mat-expansion-panel-header
												(click)="manageAccordianParentExpand(application,group.jobChecklistGroupId,groupIndex,mapanel,itemIndex)">
												<mat-panel-title>
													<span class="material-symbols-outlined"
														[ngClass]="{'disabled': isCustomerLoggedIn}"
														cdkDragHandle>drag_indicator</span>
													{{group.checkListGroupName}}
												</mat-panel-title>
												<ng-container *ngIf="group.checkListGroupType != 'PL'">
													<button class="btn btn-danger mr-2" *ngIf="!isCustomerLoggedIn"
														(click)="mapanel.close();deleteMultipleSelectedItems(deleteConfirmationMultipleItems,group)">Delete
														Items</button>
													<button class="blue-btn {{showChecklistAddBtn}}"
														*ngIf="!isCustomerLoggedIn" (click)="mapanel.close()"
														(click)="isOpen(group.jobChecklistGroupId,application.jobChecklistHeaderId)">Add
														Item</button>
												</ng-container>
											</mat-expansion-panel-header>

											<table *ngIf="group.checkListGroupType == 'General'" class="table"
												cdkDropList
												(cdkDropListDropped)="dropItemsComposite($event, group.jobChecklistGroupId, application.jobChecklistHeaderId)">
												<tr>
													<th style="width: 10px;"></th>
													<th style="width: 46px;"></th>
													<th>ITEM
														<!-- <i class="icofont-rounded-down"></i> -->
													</th>
													<th>PARTY RESPONSIBLE</th>
													<!-- <th>PERSON RESPONSIBLE</th> -->
													<th>COMMENTS</th>
													<th class="date_tab">TARGET DATE</th>
													<th class="status_tab">STATUS</th>
													<th class="TCO_tab"
														*ngIf="checklistType == 'Composite' && application?.isCOProject">
														TCO</th>
													<th></th>
												</tr>

												<ng-container *ngIf="isHideCompleted">
													<tr cdkDrag class="example-box-items"
														*ngFor="let item of group.item"
														[ngClass]="{'d-none': item.status == 3 || (isShowTco == true && item.isRequiredForTCO == false)}"
														[ngStyle]="item.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}">
														<td>
															<div class="checkbox form-check">
																<label class="form-check-label">
																	<input (change)="item.isChecked = !item.isChecked"
																		type="checkbox" class="form-check-input">
																	<i class="input-helper"></i>
																</label>
															</div>
														</td>
														<td cdkDragHandle [ngClass]="{'disabled': isCustomerLoggedIn}">
															<span class="material-symbols-outlined"
																[ngClass]="{'disabled': isCustomerLoggedIn}"
																cdkDragHandle>drag_indicator</span>
														</td>
														<td><span
																[innerHTML]="item.checklistItemName | highlight: searchedTerm"></span>
														</td>
														<td>
															<div class="partyResponsible">
																<!-- <select class="select responsible" #status
																	[disabled]="showChecklistAddBtn =='hide'"
																	[(ngModel)]='item.partyResponsible1'
																	(change)="updatePartyResponcible(status.value, item.jocbChecklistItemDetailsId)">
																	<option disabled>Select Responsibility</option>
																	<option value="RPO User">RPO User </option>
																	<option value="Contact">Contact</option>
																	<option value="Other">Other</option>
																</select> -->
																<mat-form-field appearance="outline"
																	class="custom-dropdown w-50">
																	<mat-select
																		[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																		[disabled]="(showChecklistAddBtn =='hide')"
																		[(ngModel)]='item.partyResponsible' #status
																		(selectionChange)="updatePartyResponcible(status.value, item.jocbChecklistItemDetailsId)">
																		<mat-option
																			*ngFor="let responsible of partyResponsible"
																			[value]="responsible.value">{{responsible.title}}</mat-option>
																	</mat-select>
																</mat-form-field>
																<div class="contecytResponsible"
																	*ngIf="item.partyResponsible == 'Contact'">
																	<mat-form-field appearance="outline"
																		class="custom-dropdown w-92">
																		<mat-select
																			[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																			[(ngModel)]="item.idContact"
																			[disabled]="isCustomerLoggedIn"
																			(selectionChange)="changeContact($event,item.jocbChecklistItemDetailsId)">
																			<mat-option
																				*ngFor="let topping of jobContacts"
																				[value]="topping.idContact">{{topping.contactName}}
																				<span
																					*ngIf="topping.companyName">-</span>
																				{{topping.companyName}}</mat-option>
																		</mat-select>
																	</mat-form-field>
																</div>

																<input *ngIf="item.partyResponsible == 'Other'"
																	type="text" #text class="input name" id="name"
																	(blur)="onEnter($event,item.jocbChecklistItemDetailsId, group.jobChecklistGroupId)"
																	(keyup.enter)="onEnter($event,item.jocbChecklistItemDetailsId, group.jobChecklistGroupId)"
																	[(ngModel)]='item.manualPartyResponsible'
																	[disabled]="showChecklistAddBtn =='hide'"
																	placeholder="Enter Name" name="name">
															</div>
														</td>

														<td class="comment">
															<div class="comment-box">
																<span
																	[innerHTML]="item.comments | highlight: searchedTerm"></span>
																<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
																	*ngIf="item.comments" class="add-comment"
																	[tooltip]="item.comments?'View And Add':''"
																	style="margin-left: 1rem;"
																	(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">...View</a>
																<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																	*ngIf="!item.comments" class="add-newComment"
																	[tooltip]="item.comments?'View And Add':''"
																	(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">{{addCommentTitle}}</a>
															</div>
														</td>
														<td>
															<!-- <div class="date-container">
											<input  id="dueDate" type="date" [disabled]="item.status == 3"   name="dueDate" #dueDate="ngModel"  [ngModel]="item.dueDate| date:'yyyy-MM-dd'"  placeholder="MM-DD-YYYY" (ngModelChange)="getDate($event,item.jocbChecklistItemDetailsId)">
										</div> -->
															<!-- <div datetime-picker class="inner-addon right-addon input-group">
											<i class="icon material-symbols-outlined datepickerbutton">event</i>
											<input id="dueDate" [disabled]="item.status == 3" class="datepicker form-control"  type="text" name="dueDate" #dueDate="ngModel"  [ngModel]="item.dueDate"  placeholder="mm-dd-yyyy" (ngModelChange)="getDate($event,item.jocbChecklistItemDetailsId)" />
										</div> -->
															<div class="date-container">
																<input id="dueDate"
																	[disabled]="showChecklistAddBtn =='hide'"
																	class=" form-control" type="text" name="dueDate"
																	#dueDate="ngModel" [ngModel]="item.dueDate"
																	placeholder="mm-dd-yyyy" appDatepicker
																	#datepicker="datepicker"
																	(keydown)="onKeyPress($event)"
																	(click)="getIdNumber(item.jocbChecklistItemDetailsId)"
																	(dateEventEmitter)="dateEventEmitter($event, item.jocbChecklistItemDetailsId)" />
															</div>

														</td>
														<td>
															<!-- <select class="select" #t
																[disabled]="showChecklistAddBtn =='hide'"
																[ngModel]="item.status"
																(change)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
																<option value="1">Open</option>
																<option value="2">In Process</option>
																<option value="3">Completed</option>
															</select> -->
															<mat-form-field appearance="outline"
																class="custom-dropdown">
																<mat-select
																	[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																	[disabled]="showChecklistAddBtn =='hide'"
																	[ngModel]="item.status" #t
																	(selectionChange)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
																	<mat-option *ngFor="let st of statusDropdown"
																		[value]="st.value">{{st.title}}</mat-option>
																</mat-select>
															</mat-form-field>
														</td>

														<td
															*ngIf="checklistType == 'Composite' && application?.isCOProject">
															<div class="button-switch">
																<input type="checkbox" id="switch-blue"
																	[disabled]="showChecklistAddBtn =='hide'"
																	(click)="changeTco($event,item.jocbChecklistItemDetailsId, false)"
																	class="switch" [ngModel]="item.isRequiredForTCO" />
															</div>
														</td>
														<td style="cursor: pointer;">
															<span class="material-symbols-rounded"
																[matMenuTriggerFor]="menu"
																aria-label="Example icon-button with a menu"
																[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) : showChecklistAddBtn =='hide'}">more_vert</span>
															<mat-menu #menu="matMenu">
																<ng-container *ngIf="!isCustomerLoggedIn">

																	<button *ngIf="showChecklistAddBtn =='show'"
																		mat-menu-item
																		(click)="openModalAddDoc(addJobDocument,item.jocbChecklistItemDetailsId)">

																		<span>Create form</span>
																	</button>
																	<button *ngIf="showChecklistAddBtn =='show'"
																		mat-menu-item
																		(click)="openModalAddForm(addtransmittal)">

																		<span>Create transmittal</span>
																	</button>
																	<button
																		*ngIf="showChecklistAddBtn =='show' && (item.hasDocument == false)"
																		mat-menu-item
																		(click)="openModalAddDocUpload(upLoadJobDocument,item.jocbChecklistItemDetailsId,false)">

																		<span>Upload Document</span>
																	</button>
																	<button
																		*ngIf="(showChecklistAddBtn =='show') && (item.hasDocument == true)"
																		mat-menu-item
																		(click)="openModalViewDocUpload(jobDocument,item.jocbChecklistItemDetailsId, false)">

																		<span>View Document</span>
																	</button>
																	<button *ngIf="showChecklistAddBtn =='show'"
																		mat-menu-item
																		(click)="openModalReferenceNote(ViewReferenceNote,item.jocbChecklistItemDetailsId,false)">

																		<span>References</span>
																	</button>
																	<button *ngIf="showChecklistAddBtn =='show'"
																		mat-menu-item
																		(click)="openModalProgressNote(rfpprogressionnote,item.jocbChecklistItemDetailsId,false)">

																		<span>Internal progress notes</span>
																	</button>
																	<button *ngIf="showChecklistDeleteBtn =='show'"
																		mat-menu-item
																		(click)="deleteChecklistItem(tplDeleteChecklistItem, item.jocbChecklistItemDetailsId,item.status)">

																		<span>Delete</span>
																	</button>
																</ng-container>
																<ng-container
																	*ngIf="isCustomerLoggedIn && isShowClientNot">
																	<button mat-menu-item
																		(click)="addClientNote(clientnotes,item.jocbChecklistItemDetailsId)">
																		<span>Client User Notes</span>
																	</button>
																</ng-container>
															</mat-menu>
														</td>
													</tr>
												</ng-container>

												<ng-container *ngIf="!isHideCompleted">
													<tr cdkDrag class="example-box-items"
														*ngFor="let item of group.item"
														[ngClass]="{'d-none': (isShowTco == true && item.isRequiredForTCO == false)}"
														[ngStyle]="item.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}">
														<td>
															<div class="checkbox form-check">
																<label class="form-check-label">
																	<input (change)="item.isChecked = !item.isChecked"
																		type="checkbox" class="form-check-input">
																	<i class="input-helper"></i>
																</label>
															</div>
														</td>
														<td cdkDragHandle [ngClass]="{'disabled': isCustomerLoggedIn}">
															<span class="material-symbols-outlined"
																[ngClass]="{'disabled': isCustomerLoggedIn}"
																cdkDragHandle>drag_indicator</span>
														</td>
														<td><span
																[innerHTML]="item.checklistItemName | highlight: searchedTerm"></span>
														</td>
														<td>
															<div class="partyResponsible">
																<!-- <select class="select responsible" #status
																	[disabled]="showChecklistAddBtn =='hide'"
																	[(ngModel)]='item.partyResponsible'
																	(change)="updatePartyResponcible(status.value, item.jocbChecklistItemDetailsId)">
																	<option disabled>Select Responsibility</option>
																	<option value="RPO User">RPO User </option>
																	<option value="Contact">Contact</option>
																	<option value="Other">Other</option>
																</select> -->
																<mat-form-field appearance="outline"
																	class="custom-dropdown w-50">
																	<mat-select
																		[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																		[disabled]="(showChecklistAddBtn =='hide')"
																		[(ngModel)]='item.partyResponsible' #status
																		(selectionChange)="updatePartyResponcible(status.value, item.jocbChecklistItemDetailsId)">
																		<mat-option
																			*ngFor="let responsible of partyResponsible"
																			[value]="responsible.value">{{responsible.title}}</mat-option>
																	</mat-select>
																</mat-form-field>
																<div class="contecytResponsible"
																	*ngIf="item.partyResponsible == 'Contact'">
																	<mat-form-field appearance="outline"
																		class="custom-dropdown w-92">
																		<mat-select
																			[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																			[(ngModel)]="item.idContact"
																			[disabled]="isCustomerLoggedIn"
																			(selectionChange)="changeContact($event,item.jocbChecklistItemDetailsId)">
																			<mat-option
																				*ngFor="let topping of jobContacts"
																				[value]="topping.idContact">{{topping.contactName}}
																				<span
																					*ngIf="topping.companyName">-</span>
																				{{topping.companyName}}</mat-option>
																		</mat-select>
																	</mat-form-field>
																</div>

																<input *ngIf="item.partyResponsible == 'Other'"
																	type="text" #text class="input name" id="name"
																	(blur)="onEnter($event,item.jocbChecklistItemDetailsId, group.jobChecklistGroupId)"
																	(keyup.enter)="onEnter($event,item.jocbChecklistItemDetailsId, group.jobChecklistGroupId)"
																	[(ngModel)]='item.manualPartyResponsible'
																	[disabled]="showChecklistAddBtn =='hide'"
																	placeholder="Enter Name" name="name">
															</div>
														</td>
														<td class="comment">
															<div class="comment-box">
																<span
																	[innerHTML]="item.comments | highlight: searchedTerm"></span>
																<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
																	*ngIf="item.comments" class="add-comment"
																	[tooltip]="item.comments?'View And Add':''"
																	style="margin-left: 1rem;"
																	(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">...View</a>
																<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																	*ngIf="!item.comments" class="add-newComment"
																	[tooltip]="item.comments?'View And Add':''"
																	(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">{{addCommentTitle}}</a>
															</div>
														</td>
														<td>
															<!-- <div class="date-container">
												<input  id="dueDate" type="date" [disabled]="item.status == 3"   name="dueDate" #dueDate="ngModel"  [ngModel]="item.dueDate| date:'yyyy-MM-dd'"  placeholder="MM-DD-YYYY" (ngModelChange)="getDate($event,item.jocbChecklistItemDetailsId)">
											</div> -->
															<!-- <div datetime-picker class="inner-addon right-addon input-group">
												<i class="icon material-symbols-outlined datepickerbutton">event</i>
												<input id="dueDate" [disabled]="item.status == 3" class="datepicker form-control"  type="text" name="dueDate" #dueDate="ngModel"  [ngModel]="item.dueDate"  placeholder="mm-dd-yyyy" (ngModelChange)="getDate($event,item.jocbChecklistItemDetailsId)" />
											</div> -->
															<div class="date-container">
																<input id="dueDate"
																	[disabled]="showChecklistAddBtn =='hide'"
																	class=" form-control" type="text" name="dueDate"
																	#dueDate="ngModel" [ngModel]="item.dueDate"
																	placeholder="mm-dd-yyyy" appDatepicker
																	#datepicker="datepicker"
																	(keydown)="onKeyPress($event)"
																	(click)="getIdNumber(item.jocbChecklistItemDetailsId)"
																	(dateEventEmitter)="dateEventEmitter($event, item.jocbChecklistItemDetailsId)" />
															</div>

														</td>
														<td>
															<!-- <select class="select" #t
																[disabled]="showChecklistAddBtn =='hide'"
																[ngModel]="item.status"
																(change)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
																<option value="1">Open</option>
																<option value="2">In Process</option>
																<option value="3">Completed</option>
															</select> -->
															<mat-form-field appearance="outline"
																class="custom-dropdown">
																<mat-select
																	[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																	[disabled]="showChecklistAddBtn =='hide'"
																	[ngModel]="item.status" #t
																	(selectionChange)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
																	<mat-option *ngFor="let st of statusDropdown"
																		[value]="st.value">{{st.title}}</mat-option>
																</mat-select>
															</mat-form-field>
														</td>

														<td
															*ngIf="checklistType == 'Composite' && application?.isCOProject">
															<div class="button-switch">
																<input type="checkbox" id="switch-blue"
																	[disabled]="showChecklistAddBtn =='hide'"
																	(click)="changeTco($event,item.jocbChecklistItemDetailsId, false)"
																	class="switch" [ngModel]="item.isRequiredForTCO" />
															</div>
														</td>
														<td style="cursor: pointer;">
															<span class="material-symbols-rounded"
																[matMenuTriggerFor]="menu"
																aria-label="Example icon-button with a menu"
																[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) : false}">more_vert</span>
															<mat-menu #menu="matMenu">
																<ng-container *ngIf="!isCustomerLoggedIn">
																	<button *ngIf="showChecklistAddBtn =='show'"
																		mat-menu-item
																		(click)="openModalAddDoc(addJobDocument,item.jocbChecklistItemDetailsId)">
																		<span>Create form</span>
																	</button>
																	<button *ngIf="showChecklistAddBtn =='show'"
																		mat-menu-item
																		(click)="openModalAddForm(addtransmittal)">
																		<span>Create transmittal</span>
																	</button>
																	<button
																		*ngIf="showChecklistAddBtn =='show' && (item.hasDocument == false)"
																		mat-menu-item
																		(click)="openModalAddDocUpload(upLoadJobDocument,item.jocbChecklistItemDetailsId,false)">
																		<span>Upload Document</span>
																	</button>
																	<button
																		*ngIf="(showChecklistAddBtn =='show') && (item.hasDocument == true)"
																		mat-menu-item
																		(click)="openModalViewDocUpload(jobDocument,item.jocbChecklistItemDetailsId, false)">

																		<span>View Document</span>
																	</button>
																	<button *ngIf="showChecklistAddBtn =='show'"
																		mat-menu-item
																		(click)="openModalReferenceNote(ViewReferenceNote,item.jocbChecklistItemDetailsId,false)">
																		<span>References</span>
																	</button>
																	<button *ngIf="showChecklistAddBtn =='show'"
																		mat-menu-item
																		(click)="openModalProgressNote(rfpprogressionnote,item.jocbChecklistItemDetailsId,false)">
																		<span>Internal progress notes</span>
																	</button>
																	<button *ngIf="showChecklistDeleteBtn =='show'"
																		mat-menu-item
																		(click)="deleteChecklistItem(tplDeleteChecklistItem, item.jocbChecklistItemDetailsId,item.status)">
																		<span>Delete</span>
																	</button>
																</ng-container>
																<ng-container
																	*ngIf="isCustomerLoggedIn && isShowClientNot">
																	<button mat-menu-item
																		(click)="addClientNote(clientnotes,item.jocbChecklistItemDetailsId)">
																		<span>Client User Notes</span>
																	</button>
																</ng-container>
															</mat-menu>
														</td>
													</tr>
												</ng-container>

											</table>

											<ng-container *ngIf="group.checkListGroupType == 'PL'">
												<div cdkDropList
													(cdkDropListDropped)="dropItemsComposite($event, group.jobChecklistGroupId, application.jobChecklistHeaderId)">
													<mat-accordion multi>
														<mat-expansion-panel #mapanel="matExpansionPanel"
															[expanded]="item.isExpanded"
															(opened)="beforePanelOpened(application.jobChecklistHeaderId, group.jobChecklistGroupId, item.idChecklistItem)"
															(closed)="beforePanelClosed(panel)" class="sub-item"
															*ngFor="let item of group.item;let itemIndex = index">
															<mat-expansion-panel-header
																(click)="manageAccordianParentExpand(application,group.jobChecklistGroupId,groupIndex,mapanel,itemIndex)">
																<mat-panel-title>
																	<div class="floor-title">
																		<!-- <span class="material-symbols-outlined"
																cdkDragHandle>drag_indicator</span> -->
																		<span
																			class="material-symbols-outlined r-90">expand_circle_down</span>
																		Floor: <span> {{item.checklistItemName ||
																			item.floorNumber}}</span>
																		<div class="inspections-label"
																			*ngIf="item.status">
																			<span
																				class="material-symbols-rounded fill">check_circle</span>
																			All Inspections Complete
																		</div>
																	</div>
																</mat-panel-title>
																<button class="btn btn-danger mr-2"
																	*ngIf="!isCustomerLoggedIn"
																	(click)="mapanel.close();deleteMultipleSelectedItems(deleteConfirmationMultipleItems,item)">
																	Delete Items</button>
																<button class="blue-btn" *ngIf="!isCustomerLoggedIn"
																	(click)="mapanel.close();addInspection(group.jobChecklistGroupId,item.idJobPlumbingCheckListFloors,application.idWorkPermits)">Add
																	Inspection</button>
															</mat-expansion-panel-header>

															<table class="table">
																<tr>
																	<th style="width: 10px;"></th>
																	<th>INSPECTION TYPE</th>
																	<!-- <th>FLOOR NAME </th>-->
																	<!-- <th>WORK ORDER NO.</th>  -->
																	<th>COMMENTS</th>
																	<!-- <th>NEXT INSPECTION</th> -->
																	<th class="status_tab">STATUS</th>
																	<th
																		*ngIf="checklistType == 'Composite' && application?.isCOProject">
																		TCO</th>
																	<th></th>
																</tr>
																<ng-container *ngFor="let Plitem of item.details">
																	<ng-container
																		*ngIf="Plitem.idJobPlumbingInspection != null">
																		<ng-container *ngIf="isHideCompleted">
																			<tr
																				[ngClass]="{'d-none': Plitem.result == '1' || (isShowTco == true && Plitem.isRequiredForTCO == false)}">
																				<td style="padding-left: 14px;">
																					<div class="checkbox form-check">
																						<label class="form-check-label">
																							<input
																								(change)="Plitem.isChecked = !Plitem.isChecked"
																								type="checkbox"
																								class="form-check-input">
																							<i class="input-helper"></i>
																						</label>
																					</div>
																				</td>
																				<td><span
																						[innerHTML]="Plitem.inspectionPermit | highlight: searchedTerm"></span>
																				</td>
																				<!-- <td>{{Plitem.floorName}}</td> -->
																				<!-- <td><a style="cursor: pointer;"
																			(click)="redirectWorkorder()">{{Plitem.workOrderNumber}}</a>
																	</td> -->
																				<td>
																					<div class="comment-box-pl">
																						<span
																							[innerHTML]="Plitem.plComments | highlight: searchedTerm"></span>
																						<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
																							class="add-comment"
																							*ngIf="Plitem.plComments"
																							[tooltip]="Plitem.plComments?'View And Add':''"
																							style="margin-left: 1rem;"
																							(click)="isCommentOpen(Plitem.plComments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId, true, Plitem.idJobPlumbingInspection)">...View</a>
																						<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																							*ngIf="!Plitem.plComments"
																							class="add-newComment"
																							[tooltip]="Plitem.plComments?'View And Add':''"
																							(click)="isCommentOpen(Plitem.plComments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId, true, Plitem.idJobPlumbingInspection)">{{addCommentTitle}}</a>
																					</div>

																				</td>

																				<!-- <td>
					
																		<div class="date-container">
																			<input id="dueDate" [disabled]="showChecklistAddBtn =='hide'"
																				class="datepicker form-control" type="text" name="dueDate"
																				#dueDate="ngModel" [ngModel]="Plitem.dueDate"
																				(keydown)="onKeyPress($event)" placeholder="mm-dd-yyyy"
																				appDatepicker #datepicker="datepicker"
																				(click)="getIdNumber(Plitem.idJobPlumbingInspection)"
																				(dateEventEmitter)="chnageDateforPl($event, Plitem.idJobPlumbingInspection)" />
																		</div>
																	</td> -->
																				<td>
																					<!-- <select class="select" #t
																						[disabled]="showChecklistAddBtn =='hide'"
																						[ngModel]="Plitem.result"
																						(change)="updatePlStatus(t.value, Plitem.idJobPlumbingInspection)">
																						<option value="1">Pass</option>
																						<option value="2">Failed</option>
																						<option value="3">Pending</option>
																						<option value="4">NA</option>
																					</select> -->
																					<mat-form-field appearance="outline"
																						class="custom-dropdown">
																						<mat-select
																							[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																							[disabled]="showChecklistAddBtn =='hide'"
																							[ngModel]="Plitem.result" #t
																							(selectionChange)="updatePlStatus(t.value, Plitem.idJobPlumbingInspection)">
																							<mat-option
																								*ngFor="let status of plStatus"
																								[value]="status.value">{{status.title}}</mat-option>
																						</mat-select>
																					</mat-form-field>
																				</td>
																				<td
																					*ngIf="checklistType == 'Composite' && application?.isCOProject">
																					<div class="button-switch">
																						<input type="checkbox"
																							[disabled]="showChecklistAddBtn =='hide'"
																							id="switch-blue"
																							(click)="changeTcoForPlumbing($event,Plitem.idJobPlumbingInspection, true)"
																							class="switch"
																							[ngModel]="Plitem.isRequiredForTCO" />
																					</div>
																				</td>
																				<td style="cursor: pointer;">
																					<span
																						class="material-symbols-rounded"
																						[matMenuTriggerFor]="menu"
																						aria-label="Example icon-button with a menu"
																						[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) :  showChecklistAddBtn =='hide'}">more_vert</span>
																					<mat-menu #menu="matMenu">
																						<ng-container
																							*ngIf="!isCustomerLoggedIn">
																							<button
																								*ngIf="showChecklistAddBtn =='show' && (Plitem.hasDocument == false)"
																								mat-menu-item
																								(click)="openModalAddDocUpload(upLoadJobDocument,Plitem.idJobPlumbingInspection,true)">

																								<span>Upload
																									Document</span>
																							</button>
																							<button
																								*ngIf="(showChecklistAddBtn =='show') && (Plitem.hasDocument == true)"
																								mat-menu-item
																								(click)="openModalViewDocUpload(jobDocument,Plitem.idJobPlumbingInspection, true)">

																								<span>View
																									Document</span>
																							</button>
																							<button
																								*ngIf="showChecklistAddBtn =='show'"
																								mat-menu-item
																								(click)="openModalReferenceNote(ViewReferenceNote,Plitem.idJobPlumbingInspection,true)">

																								<span>References</span>
																							</button>
																							<button
																								*ngIf="showChecklistAddBtn =='show'"
																								mat-menu-item
																								(click)="openModalProgressNote(rfpprogressionnote,application.jobChecklistHeaderId,true,Plitem.idJobPlumbingInspection)">

																								<span>Internal progress
																									notes</span>
																							</button>
																							<!-- <button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
																				(click)="openModalAddFormWorkorder(editWorkOrderNo, Plitem.workOrderNumber, Plitem.idJobPlumbingInspection)">
					
																				<span>Work Order</span>
																			</button> -->
																							<button
																								*ngIf="showChecklistDeleteBtn =='show'"
																								mat-menu-item
																								(click)="deleteChecklistItemPL(PlItemDelete, Plitem.idJobPlumbingInspection,Plitem.result)">

																								<span>Delete</span>
																							</button>
																						</ng-container>
																						<ng-container
																							*ngIf="isCustomerLoggedIn && isShowClientNot">
																							<button mat-menu-item
																								(click)="addClientNote(clientnotes,Plitem.idJobPlumbingInspection,'PL')">
																								<span>Client User
																									Notes</span>
																							</button>
																						</ng-container>
																					</mat-menu>
																				</td>
																			</tr>
																		</ng-container>
																		<ng-container *ngIf="!isHideCompleted">
																			<tr
																				[ngClass]="{'d-none': (isShowTco == true && Plitem.isRequiredForTCO == false)}">
																				<td style="padding-left: 14px;">
																					<div class="checkbox form-check">
																						<label class="form-check-label">
																							<input
																								(change)="Plitem.isChecked = !Plitem.isChecked"
																								type="checkbox"
																								class="form-check-input">
																							<i class="input-helper"></i>
																						</label>
																					</div>
																				</td>
																				<td><span
																						[innerHTML]="Plitem.inspectionPermit | highlight: searchedTerm"></span>
																				</td>
																				<!-- <td>{{Plitem.floorName}}</td> -->
																				<!-- <td><a style="cursor: pointer;"
																			(click)="redirectWorkorder()">{{Plitem.workOrderNumber}}</a>
																	</td> -->
																				<td>
																					<div class="comment-box-pl">
																						<span
																							[innerHTML]="Plitem.plComments | highlight: searchedTerm"></span>
																						<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
																							class="add-comment"
																							*ngIf="Plitem.plComments"
																							[tooltip]="Plitem.plComments?'View And Add':''"
																							style="margin-left: 1rem;"
																							(click)="isCommentOpen(Plitem.plComments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId, true, Plitem.idJobPlumbingInspection)">...View</a>
																						<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																							*ngIf="!Plitem.plComments"
																							class="add-newComment"
																							[tooltip]="Plitem.plComments?'View And Add':''"
																							(click)="isCommentOpen(Plitem.plComments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId, true, Plitem.idJobPlumbingInspection)">{{addCommentTitle}}</a>
																					</div>

																				</td>

																				<!-- <td>
					
																		<div class="date-container">
																			<input id="dueDate" [disabled]="showChecklistAddBtn =='hide'"
																				class="datepicker form-control" type="text" name="dueDate"
																				#dueDate="ngModel" [ngModel]="Plitem.dueDate"
																				(keydown)="onKeyPress($event)" placeholder="mm-dd-yyyy"
																				appDatepicker #datepicker="datepicker"
																				(click)="getIdNumber(Plitem.idJobPlumbingInspection)"
																				(dateEventEmitter)="chnageDateforPl($event, Plitem.idJobPlumbingInspection)" />
																		</div>
																	</td> -->
																				<td>
																					<!-- <select class="select" #t
																						[disabled]="showChecklistAddBtn =='hide'"
																						[ngModel]="Plitem.result"
																						(change)="updatePlStatus(t.value, Plitem.idJobPlumbingInspection)">
																						<option value="1">Pass</option>
																						<option value="2">Failed</option>
																						<option value="3">Pending</option>
																						<option value="4">NA</option>
																					</select> -->
																					<mat-form-field appearance="outline"
																						class="custom-dropdown">
																						<mat-select
																							[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																							[disabled]="showChecklistAddBtn =='hide'"
																							[ngModel]="Plitem.result" #t
																							(selectionChange)="updatePlStatus(t.value, Plitem.idJobPlumbingInspection)">
																							<mat-option
																								*ngFor="let status of plStatus"
																								[value]="status.value">{{status.title}}</mat-option>
																						</mat-select>
																					</mat-form-field>
																				</td>
																				<td
																					*ngIf="checklistType == 'Composite' && application?.isCOProject">
																					<div class="button-switch">
																						<input type="checkbox"
																							[disabled]="showChecklistAddBtn =='hide'"
																							id="switch-blue"
																							(click)="changeTcoForPlumbing($event,Plitem.idJobPlumbingInspection, true)"
																							class="switch"
																							[ngModel]="Plitem.isRequiredForTCO" />
																					</div>
																				</td>
																				<td style="cursor: pointer;">
																					<span
																						class="material-symbols-rounded"
																						[matMenuTriggerFor]="menu"
																						aria-label="Example icon-button with a menu"
																						[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) :  showChecklistAddBtn =='hide'}">more_vert</span>
																					<mat-menu #menu="matMenu">
																						<ng-container
																							*ngIf="!isCustomerLoggedIn">
																							<button
																								*ngIf="showChecklistAddBtn =='show' && (Plitem.hasDocument == false)"
																								mat-menu-item
																								(click)="openModalAddDocUpload(upLoadJobDocument,Plitem.idJobPlumbingInspection,true)">

																								<span>Upload
																									Document</span>
																							</button>
																							<button
																								*ngIf="(showChecklistAddBtn =='show') && (Plitem.hasDocument == true)"
																								mat-menu-item
																								(click)="openModalViewDocUpload(jobDocument,Plitem.idJobPlumbingInspection, true)">

																								<span>View
																									Document</span>
																							</button>
																							<button
																								*ngIf="showChecklistAddBtn =='show'"
																								mat-menu-item
																								(click)="openModalReferenceNote(ViewReferenceNote,Plitem.idJobPlumbingInspection,true)">

																								<span>References</span>
																							</button>
																							<button
																								*ngIf="showChecklistAddBtn =='show'"
																								mat-menu-item
																								(click)="openModalProgressNote(rfpprogressionnote,application.jobChecklistHeaderId,true,Plitem.idJobPlumbingInspection)">

																								<span>Internal progress
																									notes</span>
																							</button>
																							<!-- <button *ngIf="showChecklistAddBtn =='show'" mat-menu-item
																				(click)="openModalAddFormWorkorder(editWorkOrderNo, Plitem.workOrderNumber, Plitem.idJobPlumbingInspection)">
					
																				<span>Work Order</span>
																			</button> -->
																							<button
																								*ngIf="showChecklistDeleteBtn =='show'"
																								mat-menu-item
																								(click)="deleteChecklistItemPL(PlItemDelete, Plitem.idJobPlumbingInspection,Plitem.result)">

																								<span>Delete</span>
																							</button>
																						</ng-container>
																						<ng-container
																							*ngIf="isCustomerLoggedIn && isShowClientNot">
																							<button mat-menu-item
																								(click)="addClientNote(clientnotes,Plitem.idJobPlumbingInspection,'PL')">
																								<span>Client User
																									Notes</span>
																							</button>
																						</ng-container>
																					</mat-menu>
																				</td>
																			</tr>
																		</ng-container>
																	</ng-container>
																</ng-container>
															</table>
														</mat-expansion-panel>
													</mat-accordion>
												</div>
											</ng-container>

											<ng-container *ngIf="group.checkListGroupType == 'TR'">
												<table class="table" cdkDropList
													(cdkDropListDropped)="dropItemsComposite($event, group.jobChecklistGroupId, application.jobChecklistHeaderId)">
													<tr>
														<th style="width: 10px;"></th>
														<th style="width: 46px;"></th>
														<th>ITEM NAME </th>
														<th>DESIGN APPLICANT </th>
														<th>INSPECTOR </th>
														<th>COMMENTS</th>
														<th>STAGE </th>
														<th class="status_tab">STATUS </th>
														<th class="TCO_tab"
															*ngIf="checklistType == 'Composite' && application?.isCOProject">
															TCO
														</th>
														<th></th>
													</tr>

													<ng-container *ngFor="let item of group.item">
														<ng-container *ngIf="isHideCompleted">
															<tr cdkDrag
																[ngClass]="{'d-none': item.status == 3 || (isShowTco == true && item.isRequiredForTCO == false)}"
																[ngStyle]="item.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}">
																<td>
																	<div class="checkbox form-check">
																		<label class="form-check-label">
																			<input type="checkbox"
																				(change)="item.isChecked = !item.isChecked"
																				class="form-check-input">
																			<i class="input-helper"></i>
																		</label>
																	</div>
																</td>
																<td cdkDragHandle
																	[ngClass]="{'disabled': isCustomerLoggedIn}">
																	<span class="material-symbols-outlined"
																		[ngClass]="{'disabled': isCustomerLoggedIn}"
																		cdkDragHandle>drag_indicator</span>
																</td>
																<td><span
																		[innerHTML]="item.checklistItemName | highlight: searchedTerm"></span>
																</td>
																<td>
																	<mat-form-field appearance="outline"
																		class="custom-dropdown">
																		<!-- <mat-label>Design Applicant</mat-label> -->
																		<mat-select
																			[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																			[disabled]="showChecklistAddBtn =='hide'"
																			[(ngModel)]="item.idDesignApplicant"
																			(selectionChange)="changeApplicant($event,item.jocbChecklistItemDetailsId)">
																			<mat-option
																				*ngFor="let topping of jobContacts"
																				[value]="topping.id">{{topping.contactName}}
																				<span
																					*ngIf="topping.companyName">-</span>
																				{{topping.companyName}}</mat-option>
																		</mat-select>
																	</mat-form-field>
																</td>
																<td>
																	<mat-form-field appearance="outline"
																		class="custom-dropdown">
																		<!-- <mat-label>Inspector</mat-label> -->
																		<mat-select
																			[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																			[disabled]="showChecklistAddBtn =='hide'"
																			[(ngModel)]="item.idInspector"
																			(selectionChange)="changeInspector($event,item.jocbChecklistItemDetailsId)">
																			<mat-option
																				*ngFor="let topping of jobContacts"
																				[value]="topping.id">{{topping.contactName}}
																				<span
																					*ngIf="topping.companyName">-</span>
																				{{topping.companyName}}</mat-option>
																		</mat-select>
																	</mat-form-field>
																</td>
																<td class="comment">
																	<div class="comment-box">
																		<span
																			[innerHTML]="item.comments | highlight: searchedTerm"></span>
																		<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
																			class="add-comment" *ngIf="item.comments"
																			[tooltip]="item.comments?'View And Add':''"
																			style="margin-left: 1rem;"
																			(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">...View</a>
																		<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																			*ngIf="!item.comments"
																			class="add-newComment"
																			[tooltip]="item.comments?'View And Add':''"
																			(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">{{addCommentTitle}}</a>
																	</div>
																</td>
																<td>
																	<!-- <select class="select"
																		[disabled]="showChecklistAddBtn =='hide'" #stage
																		[ngModel]="item.stage"
																		(change)="changeStage(stage.value, item.jocbChecklistItemDetailsId)">
																		<option value="1">Prior to Approval</option>
																		<option value="2">Prior to Permit</option>
																		<option value="3">Prior to Sign Off</option>
																	</select> -->
																	<mat-form-field appearance="outline"
																		class="custom-dropdown">
																		<mat-select
																			[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																			[disabled]="(showChecklistAddBtn =='hide')"
																			[ngModel]="item.stage" #stage
																			(selectionChange)="changeStage(stage.value, item.jocbChecklistItemDetailsId)">
																			<mat-option *ngFor="let stage of stages"
																				[value]="stage.value">{{stage.title}}</mat-option>
																		</mat-select>
																	</mat-form-field>
																</td>
																<td>
																	<!-- <select class="select" #t
																		[disabled]="showChecklistAddBtn =='hide'"
																		[ngModel]="item.status"
																		(change)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
																		<option value="1">Open</option>
																		<option value="3">Completed</option>
																	</select> -->
																	<mat-form-field appearance="outline"
																		class="custom-dropdown">
																		<mat-select
																			[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																			[disabled]="showChecklistAddBtn =='hide'"
																			[ngModel]="item.status" #t
																			(selectionChange)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
																			<mat-option *ngFor="let st of trStatus"
																				[value]="st.value">{{st.title}}</mat-option>
																		</mat-select>
																	</mat-form-field>
																</td>
																<td
																	*ngIf="checklistType == 'Composite' && application?.isCOProject">
																	<div class="button-switch">
																		<input type="checkbox"
																			[disabled]="showChecklistAddBtn =='hide'"
																			id="switch-blue"
																			(click)="changeTco($event,item.jocbChecklistItemDetailsId, false)"
																			class="switch"
																			[ngModel]="item.isRequiredForTCO" />
																	</div>
																</td>
																<td style="cursor: pointer;">
																	<span class="material-symbols-rounded"
																		[matMenuTriggerFor]="menu"
																		aria-label="Example icon-button with a menu"
																		[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) :  showChecklistAddBtn =='hide'}">more_vert</span>
																	<mat-menu #menu="matMenu">
																		<ng-container *ngIf="!isCustomerLoggedIn">
																			<button *ngIf="showChecklistAddBtn =='show'"
																				mat-menu-item
																				(click)="openModalAddDoc(addJobDocument,item.jocbChecklistItemDetailsId)">

																				<span>Create form</span>
																			</button>
																			<button *ngIf="showChecklistAddBtn =='show'"
																				mat-menu-item
																				(click)="openModalAddForm(addtransmittal)">

																				<span>Create transmittal</span>
																			</button>
																			<button
																				*ngIf="showChecklistAddBtn =='show' && (item.hasDocument == false)"
																				mat-menu-item
																				(click)="openModalAddDocUpload(upLoadJobDocument,item.jocbChecklistItemDetailsId,false)">

																				<span>Upload Document</span>
																			</button>
																			<button
																				*ngIf="(showChecklistAddBtn =='show') && (item.hasDocument == true)"
																				mat-menu-item
																				(click)="openModalViewDocUpload(jobDocument,item.jocbChecklistItemDetailsId, false)">

																				<span>View Document</span>
																			</button>
																			<button *ngIf="showChecklistAddBtn =='show'"
																				mat-menu-item
																				(click)="openModalReferenceNote(ViewReferenceNote,item.jocbChecklistItemDetailsId,false)">

																				<span>References</span>
																			</button>
																			<button *ngIf="showChecklistAddBtn =='show'"
																				mat-menu-item
																				(click)="openModalProgressNote(rfpprogressionnote,item.jocbChecklistItemDetailsId,false)">

																				<span>Internal progress notes</span>
																			</button>
																			<button
																				*ngIf="showChecklistDeleteBtn =='show'"
																				mat-menu-item
																				(click)="deleteChecklistItem(tplDeleteChecklistItem, item.jocbChecklistItemDetailsId,item.status)">

																				<span>Delete</span>
																			</button>
																		</ng-container>
																		<ng-container
																			*ngIf="isCustomerLoggedIn && isShowClientNot">
																			<button mat-menu-item
																				(click)="addClientNote(clientnotes,item.jocbChecklistItemDetailsId)">
																				<span>Client User Notes</span>
																			</button>
																		</ng-container>
																	</mat-menu>
																</td>
															</tr>
														</ng-container>
														<ng-container *ngIf="!isHideCompleted">
															<tr cdkDrag
																[ngClass]="{'d-none': (isShowTco == true && item.isRequiredForTCO == false)}"
																[ngStyle]="item.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}">
																<td>
																	<div class="checkbox form-check">
																		<label class="form-check-label">
																			<input type="checkbox"
																				(change)="item.isChecked = !item.isChecked"
																				class="form-check-input">
																			<i class="input-helper"></i>
																		</label>
																	</div>
																</td>
																<td cdkDragHandle
																	[ngClass]="{'disabled': isCustomerLoggedIn}">
																	<span class="material-symbols-outlined"
																		[ngClass]="{'disabled': isCustomerLoggedIn}"
																		cdkDragHandle>drag_indicator</span>
																</td>
																<td><span
																		[innerHTML]="item.checklistItemName | highlight: searchedTerm"></span>
																</td>
																<td>
																	<mat-form-field appearance="outline"
																		class="custom-dropdown">
																		<!-- <mat-label>Design Applicant</mat-label> -->
																		<mat-select
																			[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																			[disabled]="showChecklistAddBtn =='hide'"
																			[(ngModel)]="item.idDesignApplicant"
																			(selectionChange)="changeApplicant($event,item.jocbChecklistItemDetailsId)">
																			<mat-option
																				*ngFor="let topping of jobContacts"
																				[value]="topping.id">{{topping.contactName}}
																				<span
																					*ngIf="topping.companyName">-</span>
																				{{topping.companyName}}</mat-option>
																		</mat-select>
																	</mat-form-field>
																</td>
																<td>
																	<mat-form-field appearance="outline"
																		class="custom-dropdown">
																		<!-- <mat-label>Inspector</mat-label> -->
																		<mat-select
																			[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																			[disabled]="showChecklistAddBtn =='hide'"
																			[(ngModel)]="item.idInspector"
																			(selectionChange)="changeInspector($event,item.jocbChecklistItemDetailsId)">
																			<mat-option
																				*ngFor="let topping of jobContacts"
																				[value]="topping.id">{{topping.contactName}}
																				<span
																					*ngIf="topping.companyName">-</span>
																				{{topping.companyName}}</mat-option>
																		</mat-select>
																	</mat-form-field>
																</td>
																<td class="comment">
																	<div class="comment-box">
																		<span
																			[innerHTML]="item.comments | highlight: searchedTerm"></span>
																		<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
																			class="add-comment" *ngIf="item.comments"
																			[tooltip]="item.comments?'View And Add':''"
																			style="margin-left: 1rem;"
																			(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">...View</a>
																		<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
																			*ngIf="!item.comments"
																			class="add-newComment"
																			[tooltip]="item.comments?'View And Add':''"
																			(click)="isCommentOpen(item.comments?'Edit':'Add Comments', item.jocbChecklistItemDetailsId, group.jobChecklistGroupId, application.jobChecklistHeaderId , false)">{{addCommentTitle}}</a>
																	</div>
																</td>
																<td>
																	<!-- <select class="select"
																		[disabled]="showChecklistAddBtn =='hide'" #stage
																		[ngModel]="item.stage"
																		(change)="changeStage(stage.value, item.jocbChecklistItemDetailsId)">
																		<option value="1">Prior to Approval</option>
																		<option value="2">Prior to Permit</option>
																		<option value="3">Prior to Sign Off</option>
																	</select> -->
																	<mat-form-field appearance="outline"
																		class="custom-dropdown">
																		<mat-select
																			[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																			[disabled]="(showChecklistAddBtn =='hide')"
																			[ngModel]="item.stage" #stage
																			(selectionChange)="changeStage(stage.value, item.jocbChecklistItemDetailsId)">
																			<mat-option *ngFor="let stage of stages"
																				[value]="stage.value">{{stage.title}}</mat-option>
																		</mat-select>
																	</mat-form-field>
																</td>
																<td>
																	<!-- <select class="select" #t
																		[disabled]="showChecklistAddBtn =='hide'"
																		[ngModel]="item.status"
																		(change)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
																		<option value="1">Open</option>
																		<option value="3">Completed</option>
																	</select> -->
																	<mat-form-field appearance="outline"
																		class="custom-dropdown">
																		<mat-select
																			[class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
																			[disabled]="showChecklistAddBtn =='hide'"
																			[ngModel]="item.status" #t
																			(selectionChange)="updateStatus(t.value, item.jocbChecklistItemDetailsId)">
																			<mat-option *ngFor="let st of trStatus"
																				[value]="st.value">{{st.title}}</mat-option>
																		</mat-select>
																	</mat-form-field>
																</td>
																<td
																	*ngIf="checklistType == 'Composite' && application?.isCOProject">
																	<div class="button-switch">
																		<input type="checkbox"
																			[disabled]="showChecklistAddBtn =='hide'"
																			id="switch-blue"
																			(click)="changeTco($event,item.jocbChecklistItemDetailsId, false)"
																			class="switch"
																			[ngModel]="item.isRequiredForTCO" />
																	</div>
																</td>
																<td style="cursor: pointer;">
																	<span class="material-symbols-rounded"
																		[matMenuTriggerFor]="menu"
																		aria-label="Example icon-button with a menu"
																		[ngClass]="{'disabled': isCustomerLoggedIn ? (!isCustomerLoggedIn || !isShowClientNot) :  showChecklistAddBtn =='hide'}">more_vert</span>
																	<mat-menu #menu="matMenu">
																		<ng-container *ngIf="!isCustomerLoggedIn">
																			<button *ngIf="showChecklistAddBtn =='show'"
																				mat-menu-item
																				(click)="openModalAddDoc(addJobDocument,item.jocbChecklistItemDetailsId)">

																				<span>Create form</span>
																			</button>
																			<button *ngIf="showChecklistAddBtn =='show'"
																				mat-menu-item
																				(click)="openModalAddForm(addtransmittal)">

																				<span>Create transmittal</span>
																			</button>
																			<button
																				*ngIf="showChecklistAddBtn =='show' && (item.hasDocument == false)"
																				mat-menu-item
																				(click)="openModalAddDocUpload(upLoadJobDocument,item.jocbChecklistItemDetailsId,false)">

																				<span>Upload Document</span>
																			</button>
																			<button
																				*ngIf="(showChecklistAddBtn =='show') && (item.hasDocument == true)"
																				mat-menu-item
																				(click)="openModalViewDocUpload(jobDocument,item.jocbChecklistItemDetailsId, false)">

																				<span>View Document</span>
																			</button>
																			<button *ngIf="showChecklistAddBtn =='show'"
																				mat-menu-item
																				(click)="openModalReferenceNote(ViewReferenceNote,item.jocbChecklistItemDetailsId,false)">

																				<span>References</span>
																			</button>
																			<button *ngIf="showChecklistAddBtn =='show'"
																				mat-menu-item
																				(click)="openModalProgressNote(rfpprogressionnote,item.jocbChecklistItemDetailsId,false)">

																				<span>Internal progress notes</span>
																			</button>
																			<button
																				*ngIf="showChecklistDeleteBtn =='show'"
																				mat-menu-item
																				(click)="deleteChecklistItem(tplDeleteChecklistItem, item.jocbChecklistItemDetailsId,item.status)">

																				<span>Delete</span>
																			</button>
																		</ng-container>
																		<ng-container
																			*ngIf="isCustomerLoggedIn && isShowClientNot">
																			<button mat-menu-item
																				(click)="addClientNote(clientnotes,item.jocbChecklistItemDetailsId)">
																				<span>Client User Notes</span>
																			</button>
																		</ng-container>
																	</mat-menu>
																</td>
															</tr>
														</ng-container>
													</ng-container>
												</table>
											</ng-container>

										</mat-expansion-panel>
									</mat-accordion>
								</div>

							</mat-expansion-panel>
						</mat-accordion>
					</ng-container>
				</ng-container>
			</ng-container>
		</div>

		<!-- Violations -->
		<mat-accordion *ngIf="checklistType === 'Composite'">
			<mat-expansion-panel class="header" hideToggle="true">
				<mat-expansion-panel-header>
					<mat-panel-title class="h3">
						<span class="material-symbols-outlined r-90">expand_circle_down</span>
						Violations
					</mat-panel-title>
				</mat-expansion-panel-header>

				<!-- ECB Violation -->
				<mat-expansion-panel class="header" *ngIf="showJobViolation == 'show'" #oathViolation="matExpansionPanel">
					<mat-expansion-panel-header>
						<mat-panel-title class="h3">
							<span class="material-symbols-outlined r-90">expand_circle_down</span>
							ECB/OATH Violations
							<!-- <input type="text" class="form-control information-input" maxlength="50"
								(keyup.enter)="updateHeaderInfo(application,$event)" (focusout)="updateHeaderInfo(application,$event)"
								[value]="application?.others" placeholder="Information"> -->
						</mat-panel-title>
						<ng-container *ngIf="!isCustomerLoggedIn">
							<button class="blue-btn {{showAddViolation}}"
								(click)="openAddViolationModal(formAddViolation,'ECB');oathViolation.close()">Add
								Violation</button>
						</ng-container>
					</mat-expansion-panel-header>
					<div class="table-responsive">
						<table class="table violation">
							<tr>
								<th class="date_tab cursor-pointer" (click)="onSortEcb('dateIssued')">
									<div class="header-alignment">
										ISSUE DATE
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (ecbViolationColumn == 'dateIssued' && isEcbAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto cursor-pointer" style="width: 200px;"
									(click)="onSortEcb('summonsNumber')">
									<div class="header-alignment">
										ECB VIOLATION#
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (ecbViolationColumn == 'summonsNumber'  && isEcbAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto cursor-pointer" (click)="onSortEcb('violationDescription')">
									<div class="header-alignment">
										VIOLATION DESCRIPTION
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (ecbViolationColumn == 'violationDescription' && isEcbAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto cursor-pointer" style="width: 198px;"
									(click)="onSortEcb('partyResponsible')">
									<div class="header-alignment">
										PARTY RESPONSIBLE
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (ecbViolationColumn == 'partyResponsible' && isEcbAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="date_tab" style="width: 180px;">COMMENTS</th>
								<th class="status_tab cursor-pointer" (click)="onSortEcb('certificationStatus')">
									<div class="header-alignment">
										VIOLATION STATUS
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (ecbViolationColumn == 'certificationStatus' && isEcbAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<!-- <th class="status_tab cursor-pointer" (click)="onSortEcb('status')">
									<div class="header-alignment">
										STATUS
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (ecbViolationColumn == 'status' && isEcbAscending == true)}">
											expand_more
										</span>
									</div>
								</th> -->
								<th class="min-auto cursor-pointer" style="width: 80px;" *ngIf="isShowTcoItems"
									(click)="onSortEcb('tcoToggle')">
									<div class="header-alignment">
										TCO
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (ecbViolationColumn == 'tcoToggle' && isEcbAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto" *ngIf="!isCustomerLoggedIn"></th>
							</tr>
							<ng-container *ngFor="let violation of VoilationlistArray;">
								<ng-container *ngIf="isHideCompleted">
									<!-- <tr class="cursor-pointer"
										[ngStyle]="violation.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}"
										[ngClass]="{'d-none': violation.status == 3 || (isShowTco == true && violation.tcoToggle == false)}"> -->
									<!-- <tr class="cursor-pointer"
										[ngStyle]="(violation.certificationStatus == 'N/A - DISMISSED' || violation.certificationStatus == 'CERTIFICATE ACCEPTED' || violation.certificationStatus == 'CURE ACCEPTED' || violation.certificationStatus == 'COMPLIANCE INSP/DOC') ? {'opacity': '0.5'} : {'opacity': 'unset'}"
										[ngClass]="{'d-none': violation.status == 3 || (isShowTco == true && violation.tcoToggle == false)}"> -->
									<tr class="cursor-pointer"
										[ngStyle]="checkGreyedOutInEcb(violation.certificationStatus) ? {'opacity': '0.5'} : {'opacity': 'unset'}"
										[ngClass]="{'d-none': violation.status == 3 || (isShowTco == true && violation.tcoToggle == false)}">
										<td (click)="viewViolationDetails(viewViolation,violation.id)">
											<span
												[innerHTML]="(violation.dateIssued | date: 'MM/dd/yyyy')  | highlight: searchedTerm"></span>
										</td>
										<td (click)="viewViolationDetails(viewViolation,violation.id)">
											<span
												[innerHTML]="violation.summonsNumber | highlight: searchedTerm"></span>
										</td>
										<td (click)="viewViolationDetails(viewViolation,violation.id)">
											<span class="long-text"
												[innerHTML]="violation.violationDescription | highlight: searchedTerm"></span>
										</td>
										<td (click)="viewViolationDetails(viewViolation,violation.id)">
											{{violation.partyResponsible == '3' ? 'Other' : 'RPO'}}
											<!-- {{violation.partyResponsible == '3' ? 'Other' : 'RPO Team'}} -->
										</td>
										<td class="comment">
											<div class="comment-box"> <span
													[innerHTML]="violation.comment | highlight: searchedTerm"></span>
												<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
													*ngIf="violation.comment" class="add-comment"
													[tooltip]="violation.comment?'View And Add':''"
													style="margin-left: 1rem;"
													(click)="isViolationCommentOpen(violation.id)">...View</a>
												<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
													*ngIf="!violation.comment || violation.comment == null"
													class="add-newComment"
													[tooltip]="violation.comment?'View And Add':''"
													(click)="isViolationCommentOpen(violation.id)">{{addCommentTitle}}</a>
											</div>
										</td>
										<td>
											<!-- <mat-form-field appearance="outline" class="custom-dropdown">
												<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
													[disabled]="showChecklistAddBtn =='hide'" -->

											<!-- <mat-form-field appearance="outline" class="custom-dropdown">
												<mat-select [disabled]="showChecklistAddBtn =='hide'"
													[ngModel]="violation.status" #ecbViolationStatus
													(selectionChange)="updateChecklistStatusForViolation(ecbViolationStatus.value, violation.id)">
													<mat-option *ngFor="let st of statusDropdownOfViolation"
														[value]="st.value">{{st.title}}</mat-option>
												</mat-select>
											</mat-form-field> -->
											{{violation?.certificationStatus}}
										</td>
										<td *ngIf="isShowTcoItems">
											<div class="button-switch">
												<input type="checkbox" id="switch-blue"
													[disabled]="showChecklistAddBtn =='hide'"
													(click)="changeTcoForViolation($event,violation.id)" class="switch"
													[ngModel]="violation.tcoToggle" />
											</div>
										</td>
										<td *ngIf="!isCustomerLoggedIn">
											<span class="material-symbols-outlined" [matMenuTriggerFor]="menu"
												aria-label="Example icon-button with a menu">more_vert</span>
											<mat-menu #menu="matMenu">
												<button mat-menu-item
													(click)="viewViolationDetails(viewViolation,violation.id)">
													<span>View Violation</span>
												</button>
												<button *ngIf="showAddViolation =='show'" mat-menu-item
													(click)="openViolationModalForm(formEditViolation,violation.id)">
													<span>Edit</span>
												</button>
												<!-- <button *ngIf="showAddViolation =='show'" mat-menu-item
													(click)="openViolationProgressionModalForm(progressionnote,violation.id)">
													<span>Add Progression Note </span>
												</button> -->
												<button *ngIf="showDeleteViolation =='show'" mat-menu-item
													(click)="deleteVoilationPopup(deleteVoilation, violation.id)">
													<span>Delete</span>
												</button>
												<button *ngIf="showAddViolation =='show'" mat-menu-item
													(click)="openOuth(violation.summonsNumber)">
													<span>OATH</span>
												</button>
												<div
													*ngIf="violation.issuingAgency == 'Dept Of Buildings' || violation.issuingAgency == 'DEPT. OF BUILDINGS'">
													<button mat-menu-item (click)="openBis(violation,'AOTH Violation')">
														<span>BIS</span>
													</button>
												</div>
											</mat-menu>
									</tr>
								</ng-container>
								<ng-container *ngIf="!isHideCompleted">
									<!-- <tr class="cursor-pointer"
										[ngStyle]="violation.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}"
										[ngClass]="{'d-none':(isShowTco == true && violation.tcoToggle == false)}"> -->
									<tr class="cursor-pointer"
										[ngStyle]="checkGreyedOutInEcb(violation.certificationStatus) ?{'opacity': '0.5'} : {'opacity': 'unset'}"
										[ngClass]="{'d-none':(isShowTco == true && violation.tcoToggle == false)}">
										<td (click)="viewViolationDetails(viewViolation,violation.id)">
											<span
												[innerHTML]="(violation.dateIssued | date: 'MM/dd/yyyy')  | highlight: searchedTerm"></span>
										</td>
										<td (click)="viewViolationDetails(viewViolation,violation.id)">
											<span
												[innerHTML]="violation.summonsNumber | highlight: searchedTerm"></span>
										</td>
										<td (click)="viewViolationDetails(viewViolation,violation.id)">
											<span class="long-text"
												[innerHTML]="violation.violationDescription | highlight: searchedTerm"></span>
										</td>
										<td (click)="viewViolationDetails(viewViolation,violation.id)">
											{{violation.partyResponsible == '3' ? 'Other' : 'RPO'}}
											<!-- {{violation.partyResponsible == '3' ? 'Other' : 'RPO Team'}} -->
										</td>
										<td class="comment">
											<div class="comment-box"> <span
													[innerHTML]="violation.comment | highlight: searchedTerm"></span>
												<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
													*ngIf="violation.comment" class="add-comment"
													[tooltip]="violation.comment?'View And Add':''"
													style="margin-left: 1rem;"
													(click)="isViolationCommentOpen(violation.id)">...View</a>
												<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
													*ngIf="!violation.comment || violation.comment == null"
													class="add-newComment"
													[tooltip]="violation.comment?'View And Add':''"
													(click)="isViolationCommentOpen(violation.id)">{{addCommentTitle}}</a>
											</div>
										</td>
										<td>
											<!-- <mat-form-field appearance="outline" class="custom-dropdown">
												<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
													[disabled]="showChecklistAddBtn =='hide'" -->
											{{violation?.certificationStatus}}
											<!-- <mat-form-field appearance="outline" class="custom-dropdown">
												<mat-select [disabled]="showChecklistAddBtn =='hide'"
													[ngModel]="violation.status" #ecbViolationStatus
													(selectionChange)="updateChecklistStatusForViolation(ecbViolationStatus.value, violation.id)">
													<mat-option *ngFor="let st of statusDropdownOfViolation"
														[value]="st.value">{{st.title}}</mat-option>
												</mat-select>
											</mat-form-field> -->
										</td>
										<td *ngIf="isShowTcoItems">
											<div class="button-switch">
												<input type="checkbox" id="switch-blue"
													[disabled]="showChecklistAddBtn =='hide'"
													(click)="changeTcoForViolation($event,violation.id)" class="switch"
													[ngModel]="violation.tcoToggle" />
											</div>
										</td>
										<td *ngIf="!isCustomerLoggedIn">
											<span class="material-symbols-outlined" [matMenuTriggerFor]="menu"
												aria-label="Example icon-button with a menu">more_vert</span>
											<mat-menu #menu="matMenu">
												<button mat-menu-item
													(click)="viewViolationDetails(viewViolation,violation.id)">
													<span>View Violation</span>
												</button>
												<button *ngIf="showAddViolation =='show'" mat-menu-item
													(click)="openViolationModalForm(formEditViolation,violation.id)">
													<span>Edit Violation</span>
												</button>
												<!-- <button *ngIf="showAddViolation =='show'" mat-menu-item
													(click)="openViolationProgressionModalForm(progressionnote,violation.id)">
													<span>Add Progression Note </span>
												</button> -->
												<button *ngIf="showDeleteViolation =='show'" mat-menu-item
													(click)="deleteVoilationPopup(deleteVoilation, violation.id)">
													<span>Delete</span>
												</button>
												<button *ngIf="showAddViolation =='show'" mat-menu-item
													(click)="openOuth(violation.summonsNumber)">
													<span>OATH</span>
												</button>
												<div
													*ngIf="violation.issuingAgency == 'Dept Of Buildings' || violation.issuingAgency == 'DEPT. OF BUILDINGS'">
													<button mat-menu-item (click)="openBis(violation,'AOTH Violation')">
														<span>BIS</span>
													</button>
												</div>
											</mat-menu>
									</tr>
								</ng-container>
							</ng-container>
						</table>
					</div>
				</mat-expansion-panel>

				<!-- DOB Violation -->
				<mat-expansion-panel class="header" *ngIf="showDOBJobViolation == 'show'" #dobViolation="matExpansionPanel">
					<mat-expansion-panel-header>
						<mat-panel-title class="h3">
							<span class="material-symbols-outlined r-90">expand_circle_down</span>
							DOB Violations
							<!-- <input type="text" class="form-control information-input" maxlength="50"
								(keyup.enter)="updateHeaderInfo(application,$event)" (focusout)="updateHeaderInfo(application,$event)"
								[value]="application?.others" placeholder="Information"> -->
						</mat-panel-title>
						<ng-container *ngIf="!isCustomerLoggedIn">
							<button class="blue-btn {{showAddViolation}}"
								(click)="openAddViolationModal(formAddViolation,'DOB');dobViolation.close()">Add
								Violation</button>
						</ng-container>
					</mat-expansion-panel-header>
					<div class="table-responsive">
						<table class="table violation">
							<tr>
								<th class="date_tab cursor-pointer" (click)="onSortDob('dateIssued')">
									<div class="header-alignment">
										ISSUE DATE
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobViolationColumn == 'dateIssued' && isDobAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto cursor-pointer" style="width: 180px;"
									(click)="onSortDob('summonsNumber')">
									<div class="header-alignment">
										DOB VIOLATION#
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobViolationColumn == 'summonsNumber' && isDobAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto cursor-pointer" style="width: 180px;"
									(click)="onSortDob('ecbNumber')">
									<div class="header-alignment">
										RELATED ECB#
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobViolationColumn == 'ecbNumber' && isDobAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto cursor-pointer" (click)="onSortDob('violationDescription')">
									<div class="header-alignment">
										VIOLATION DESCRIPTION
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobViolationColumn == 'violationDescription' && isDobAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto cursor-pointer" style="width: 198px;"
									(click)="onSortDob('partyResponsible')">
									<div class="header-alignment">
										PARTY RESPONSIBLE
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobViolationColumn == 'partyResponsible' && isDobAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="date_tab" style="width: 180px;">COMMENTS</th>
								<th class="status_tab cursor-pointer" (click)="onSortDob('status')">
									<div class="header-alignment">
										VIOLATION STATUS
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobViolationColumn == 'status' && isDobAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<!-- <th class="status_tab cursor-pointer" (click)="onSortDob('status')">
									<div class="header-alignment">
										STATUS
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobViolationColumn == 'status' && isDobAscending == true)}">
											expand_more
										</span>
									</div>
								</th> -->
								<th class="min-auto cursor-pointer" style="width: 80px;" *ngIf="isShowTcoItems"
									(click)="onSortDob('tcoToggle')">
									<div class="header-alignment">
										TCO
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobViolationColumn == 'tcoToggle' && isDobAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto" *ngIf="!isCustomerLoggedIn"></th>
							</tr>
							<ng-container *ngFor="let violation of VoilationDoblistArray;">
								<ng-container *ngIf="isHideCompleted">
									<!-- <tr class="cursor-pointer"
										[ngStyle]="violation.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}"
										[ngClass]="{'d-none': violation.status == 3 || (isShowTco == true && violation.tcoToggle == false)}"> -->
									<tr class="cursor-pointer"
										[ngStyle]="hasDismissedOrResolved(violation.violationCategory)?{'opacity': '0.5'} : {'opacity': 'unset'}"
										[ngClass]="{'d-none': violation.status == 3 || (isShowTco == true && violation.tcoToggle == false)}">
										<td (click)="openDobViolationViewModal(viewDobViolation,violation.id)">
											<span
												[innerHTML]="(violation.dateIssued | date: 'MM/dd/yyyy')  | highlight: searchedTerm"></span>
										</td>
										<td (click)="openDobViolationViewModal(viewDobViolation,violation.id)">
											<span
												[innerHTML]="violation.summonsNumber | highlight: searchedTerm"></span>
										</td>
										<td
											(click)="openDobViolationViewModal(viewEcbFromDobViolation,violation.ecbNumber)">
											<a [innerHTML]="violation.ecbNumber | highlight: searchedTerm"></a>
										</td>
										<td (click)="openDobViolationViewModal(viewDobViolation,violation.id)">
											<span class="long-text"
												[innerHTML]="violation.violationDescription | highlight: searchedTerm"></span>
										</td>
										<td (click)="openDobViolationViewModal(viewDobViolation,violation.id)">
											{{violation.partyResponsible == '3' ? 'Other' : 'RPO'}}
											<!-- {{violation.partyResponsible == '3' ? 'Other' : 'RPO Team'}} -->
										</td>
										<td class="comment">
											<div class="comment-box"> <span
													[innerHTML]="violation.comment | highlight: searchedTerm"></span>
												<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
													*ngIf="violation.comment" class="add-comment"
													[tooltip]="violation.comment?'View And Add':''"
													style="margin-left: 1rem;"
													(click)="isViolationCommentOpen(violation.id)">...View</a>
												<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
													*ngIf="!violation.comment || violation.comment == null"
													class="add-newComment"
													[tooltip]="violation.comment?'View And Add':''"
													(click)="isViolationCommentOpen(violation.id)">{{addCommentTitle}}</a>
											</div>
										</td>
										<td>
											<!-- <mat-form-field appearance="outline" class="custom-dropdown">
												<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
													[disabled]="showChecklistAddBtn =='hide'" -->
											<!-- <mat-form-field appearance="outline" class="custom-dropdown">
												<mat-select [disabled]="showChecklistAddBtn =='hide'"
													[ngModel]="violation.status" #dobViolationStatus
													(selectionChange)="updateChecklistStatusForViolation(dobViolationStatus.value, violation.id)">
													<mat-option *ngFor="let st of statusDropdownOfViolation"
														[value]="st.value">{{st.title}}</mat-option>
												</mat-select>
											</mat-form-field> -->
											{{violation.violationCategory}}
										</td>
										<td *ngIf="isShowTcoItems">
											<div class="button-switch">
												<input type="checkbox" id="switch-blue"
													[disabled]="showChecklistAddBtn =='hide'"
													(click)="changeTcoForViolation($event,violation.id)" class="switch"
													[ngModel]="violation.tcoToggle" />
											</div>
										</td>
										<td *ngIf="!isCustomerLoggedIn">
											<span class="material-symbols-outlined" [matMenuTriggerFor]="menu"
												aria-label="Example icon-button with a menu">more_vert</span>
											<mat-menu #menu="matMenu">
												<button mat-menu-item
													(click)="openDobViolationViewModal(viewDobViolation,violation.id)">
													<span>View Violation</span>
												</button>
												<button *ngIf="showAddViolation =='show'" mat-menu-item
													(click)="openViolationModalForm(formEditDobViolation,violation.id)">
													<span>Edit Violation</span>
												</button>
												<button *ngIf="showDeleteViolation =='show'" mat-menu-item
													(click)="deleteVoilationPopup(deleteVoilation, violation.id)">
													<span>Delete</span>
												</button>
												<div>
													<button mat-menu-item (click)="openBis(violation,'DOB Violation')">
														<span>BIS</span>
													</button>
												</div>
											</mat-menu>
									</tr>
								</ng-container>
								<ng-container *ngIf="!isHideCompleted">
									<!-- <tr class="cursor-pointer"
										[ngStyle]="violation.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}"
										[ngClass]="{'d-none':(isShowTco == true && violation.tcoToggle == false)}"> -->
									<tr class="cursor-pointer"
										[ngStyle]="hasDismissedOrResolved(violation.violationCategory)?{'opacity': '0.5'} : {'opacity': 'unset'}"
										[ngClass]="{'d-none':(isShowTco == true && violation.tcoToggle == false)}">
										<td (click)="openDobViolationViewModal(viewDobViolation,violation.id)">
											<span
												[innerHTML]="(violation.dateIssued | date: 'MM/dd/yyyy')  | highlight: searchedTerm"></span>
										</td>
										<td (click)="openDobViolationViewModal(viewDobViolation,violation.id)">
											<span
												[innerHTML]="violation.summonsNumber | highlight: searchedTerm"></span>
										</td>
										<td
											(click)="openDobViolationViewModal(viewEcbFromDobViolation,violation.ecbNumber)">
											<a [innerHTML]="violation.ecbNumber | highlight: searchedTerm"></a>
										</td>
										<td (click)="openDobViolationViewModal(viewDobViolation,violation.id)">
											<span class="long-text"
												[innerHTML]="violation.violationDescription | highlight: searchedTerm"></span>
										</td>
										<td (click)="openDobViolationViewModal(viewDobViolation,violation.id)">
											{{violation.partyResponsible == '3' ? 'Other' : 'RPO'}}
											<!-- {{violation.partyResponsible == '3' ? 'Other' : 'RPO Team'}} -->
										</td>
										<td class="comment">
											<div class="comment-box"> <span
													[innerHTML]="violation.comment | highlight: searchedTerm"></span>
												<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
													*ngIf="violation.comment" class="add-comment"
													[tooltip]="violation.comment?'View And Add':''"
													style="margin-left: 1rem;"
													(click)="isViolationCommentOpen(violation.id)">...View</a>
												<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
													*ngIf="!violation.comment || violation.comment == null"
													class="add-newComment"
													[tooltip]="violation.comment?'View And Add':''"
													(click)="isViolationCommentOpen(violation.id)">{{addCommentTitle}}</a>
											</div>
										</td>
										<td>
											<!-- <mat-form-field appearance="outline" class="custom-dropdown">
												<mat-select [class]="isCustomerLoggedIn ? 'hide-arrow' : ''"
													[disabled]="showChecklistAddBtn =='hide'" -->


											<!-- <mat-form-field appearance="outline" class="custom-dropdown">
												<mat-select [disabled]="showChecklistAddBtn =='hide'"
													[ngModel]="violation.status" #dobViolationStatus
													(selectionChange)="updateChecklistStatusForViolation(dobViolationStatus.value, violation.id)">
													<mat-option *ngFor="let st of statusDropdownOfViolation"
														[value]="st.value">{{st.title}}</mat-option>
												</mat-select>
											</mat-form-field> -->
											{{violation.violationCategory}}
										</td>
										<td *ngIf="isShowTcoItems">
											<div class="button-switch">
												<input type="checkbox" id="switch-blue"
													[disabled]="showChecklistAddBtn =='hide'"
													(click)="changeTcoForViolation($event,violation.id)" class="switch"
													[ngModel]="violation.tcoToggle" />
											</div>
										</td>
										<td *ngIf="!isCustomerLoggedIn">
											<span class="material-symbols-outlined" [matMenuTriggerFor]="menu"
												aria-label="Example icon-button with a menu">more_vert</span>
											<mat-menu #menu="matMenu">
												<button mat-menu-item
													(click)="openDobViolationViewModal(viewDobViolation,violation.id)">
													<span>View Violation</span>
												</button>
												<button *ngIf="showAddViolation =='show'" mat-menu-item
													(click)="openViolationModalForm(formEditDobViolation,violation.id)">
													<span>Edit Violation</span>
												</button>
												<button *ngIf="showDeleteViolation =='show'" mat-menu-item
													(click)="deleteVoilationPopup(deleteVoilation, violation.id)">
													<span>Delete</span>
												</button>
												<div>
													<button mat-menu-item (click)="openBis(violation,'DOB Violation')">
														<span>BIS</span>
													</button>
												</div>
											</mat-menu>
									</tr>
								</ng-container>
							</ng-container>
						</table>
					</div>
				</mat-expansion-panel>

				<!-- DOB Safety Violation -->
				<mat-expansion-panel class="header" *ngIf="showDOBSafetyJobViolation == 'show'" #dobSafetyViolation="matExpansionPanel">
					<mat-expansion-panel-header>
						<mat-panel-title class="h3">
							<span class="material-symbols-outlined r-90">expand_circle_down</span>
							DOB Safety Violations
							<!-- <input type="text" class="form-control information-input" maxlength="50"
								(keyup.enter)="updateHeaderInfo(application,$event)" (focusout)="updateHeaderInfo(application,$event)"
								[value]="application?.others" placeholder="Information"> -->
						</mat-panel-title>
						<ng-container *ngIf="!isCustomerLoggedIn">
							<button class="blue-btn {{showAddViolation}}"
								(click)="openAddViolationModal(formAddViolation,'DOB Safety');dobSafetyViolation.close()">Add
								Violation</button>
						</ng-container>
					</mat-expansion-panel-header>
					<div class="table-responsive">
						<table class="table violation">
							<tr>
								<th class="date_tab cursor-pointer" (click)="onSortDobSafety('dateIssued')">
									<div class="header-alignment">
										ISSUE DATE
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobSafetyViolationColumn == 'dateIssued' && isDobSafetyAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto cursor-pointer"
									(click)="onSortDobSafety('summonsNumber')">
									<div class="header-alignment">
										DOB SAFETY VIOLATION#
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobSafetyViolationColumn == 'summonsNumber' && isDobSafetyAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto cursor-pointer"
									(click)="onSortDobSafety('violation_type')">
									<div class="header-alignment">
										VIOLATION TYPE
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobSafetyViolationColumn == 'violation_type' && isDobSafetyAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto cursor-pointer" style="width: 180px;" (click)="onSortDobSafety('violationDescription')">
									<div class="header-alignment">
										VIOLATION DESCRIPTION
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobSafetyViolationColumn == 'violationDescription' && isDobSafetyAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto cursor-pointer" (click)="onSortDobSafety('device_type')">
									<div class="header-alignment">
										DEVICE TYPE
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobSafetyViolationColumn == 'device_type' && isDobSafetyAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto cursor-pointer" (click)="onSortDobSafety('deviceNumber')">
									<div class="header-alignment">
										DEVICE NUMBER
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobSafetyViolationColumn == 'deviceNumber' && isDobSafetyAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto cursor-pointer" (click)="onSortDobSafety('violation_status')">
									<div class="header-alignment">
										VIOLATION STATUS
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobSafetyViolationColumn == 'violation_status' && isDobSafetyAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto cursor-pointer"
									(click)="onSortDobSafety('partyResponsible')">
									<div class="header-alignment">
										PARTY RESPONSIBLE
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobSafetyViolationColumn == 'partyResponsible' && isDobSafetyAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="date_tab">COMMENTS</th>

								<!-- <th class="status_tab cursor-pointer" (click)="onSortDob('status')">
									<div class="header-alignment">
										STATUS
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobViolationColumn == 'status' && isDobSafetyAscending == true)}">
											expand_more
										</span>
									</div>
								</th> -->
								<th class="min-auto cursor-pointer" style="width: 80px;" *ngIf="isShowTcoItems"
									(click)="onSortDobSafety('tcoToggle')">
									<div class="header-alignment">
										TCO
										<span class="material-symbols-outlined"
											[ngClass]="{'rotate-180': (dobSafetyViolationColumn == 'tcoToggle' && isDobSafetyAscending == true)}">
											expand_more
										</span>
									</div>
								</th>
								<th class="min-auto" *ngIf="!isCustomerLoggedIn"></th>
							</tr>
							<ng-container *ngFor="let violation of VoilationDobSafetyListArray;">
								<ng-container *ngIf="isHideCompleted">
									<!-- <tr class="cursor-pointer"
										[ngStyle]="violation.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}"
										[ngClass]="{'d-none': violation.status == 3 || (isShowTco == true && violation.tcoToggle == false)}"> -->
									<tr class="cursor-pointer"
										[ngStyle]="hasDismissedOrResolved(violation.violationCategory)?{'opacity': '0.5'} : {'opacity': 'unset'}"
										[ngClass]="{'d-none': violation.status == 3 || (isShowTco == true && violation.tcoToggle == false)}">
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											<span
												[innerHTML]="(violation.dateIssued | date: 'MM/dd/yyyy')  | highlight: searchedTerm"></span>
										</td>
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											<span
												[innerHTML]="violation.summonsNumber | highlight: searchedTerm"></span>
										</td>
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											<span
												[innerHTML]="violation.violation_type | highlight: searchedTerm"></span>
										</td>
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											<span class="long-text" style="width: 168px;"
												[innerHTML]="violation.violationDescription | highlight: searchedTerm"></span>
										</td>
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											<a [innerHTML]="violation.device_type | highlight: searchedTerm"></a>
										</td>
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											<a [innerHTML]="violation.deviceNumber | highlight: searchedTerm"></a>
										</td>
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											<a [innerHTML]="violation.violation_status | highlight: searchedTerm"></a>
										</td>
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											{{violation.partyResponsible == '3' ? 'Other' : 'RPO'}}
											<!-- {{violation.partyResponsible == '3' ? 'Other' : 'RPO Team'}} -->
										</td>
										<td class="comment">
											<div class="comment-box"> <span
													[innerHTML]="violation.comment | highlight: searchedTerm"></span>
												<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
													*ngIf="violation.comment" class="add-comment"
													[tooltip]="violation.comment?'View And Add':''"
													style="margin-left: 1rem;"
													(click)="isViolationCommentOpen(violation.id)">...View</a>
												<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
													*ngIf="!violation.comment || violation.comment == null"
													class="add-newComment"
													[tooltip]="violation.comment?'View And Add':''"
													(click)="isViolationCommentOpen(violation.id)">{{addCommentTitle}}</a>
											</div>
										</td>
										<td *ngIf="isShowTcoItems">
											<div class="button-switch">
												<input type="checkbox" id="switch-blue"
													[disabled]="showChecklistAddBtn =='hide'"
													(click)="changeTcoForViolation($event,violation.id)" class="switch"
													[ngModel]="violation.tcoToggle" />
											</div>
										</td>
										<td *ngIf="!isCustomerLoggedIn">
											<span class="material-symbols-outlined" [matMenuTriggerFor]="menu"
												aria-label="Example icon-button with a menu">more_vert</span>
											<mat-menu #menu="matMenu">
												<button mat-menu-item
													(click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
													<span>View Violation</span>
												</button>
												<button *ngIf="showAddViolation =='show'" mat-menu-item
													(click)="openViolationModalForm(formAddDobSafetyViolation,violation.id)">
													<span>Edit Violation</span>
												</button>
												<button *ngIf="showDeleteViolation =='show'" mat-menu-item
													(click)="deleteVoilationPopup(deleteVoilation, violation.id)">
													<span>Delete</span>
												</button>
												<!-- <div>
													<button mat-menu-item (click)="openBis(violation,'DOB Violation')">
														<span>BIS</span>
													</button>
												</div> -->
											</mat-menu>
									</tr>
								</ng-container>
								<ng-container *ngIf="!isHideCompleted">
									<!-- <tr class="cursor-pointer"
										[ngStyle]="violation.status == 3?{'opacity': '0.5'} : {'opacity': 'unset'}"
										[ngClass]="{'d-none':(isShowTco == true && violation.tcoToggle == false)}"> -->
									<tr class="cursor-pointer"
										[ngStyle]="hasDismissedOrResolved(violation.violationCategory)?{'opacity': '0.5'} : {'opacity': 'unset'}"
										[ngClass]="{'d-none':(isShowTco == true && violation.tcoToggle == false)}">
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											<span
												[innerHTML]="(violation.dateIssued | date: 'MM/dd/yyyy')  | highlight: searchedTerm"></span>
										</td>
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											<span
												[innerHTML]="violation.summonsNumber | highlight: searchedTerm"></span>
										</td>
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											<span
												[innerHTML]="violation.violation_type | highlight: searchedTerm"></span>
										</td>
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											<span class="long-text" style="width: 168px;"
												[innerHTML]="violation.violationDescription | highlight: searchedTerm"></span>
										</td>
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											<span
												[innerHTML]="violation.device_type | highlight: searchedTerm"></span>
										</td>
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											<span
												[innerHTML]="violation.deviceNumber | highlight: searchedTerm"></span>
										</td>
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											<span
												[innerHTML]="violation.violation_status | highlight: searchedTerm"></span>
										</td>
										<td (click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
											{{violation.partyResponsible == '3' ? 'Other' : 'RPO'}}
											<!-- {{violation.partyResponsible == '3' ? 'Other' : 'RPO Team'}} -->
										</td>
										<td class="comment">
											<div class="comment-box"> <span
													[innerHTML]="violation.comment | highlight: searchedTerm"></span>
												<a [ngClass]="{ 'disabled' : isCustomerLoggedIn ? false : showChecklistAddBtn =='hide' }"
													*ngIf="violation.comment" class="add-comment"
													[tooltip]="violation.comment?'View And Add':''"
													style="margin-left: 1rem;"
													(click)="isViolationCommentOpen(violation.id)">...View</a>
												<a [ngClass]="{ 'disabled' : showChecklistAddBtn =='hide' }"
													*ngIf="!violation.comment || violation.comment == null"
													class="add-newComment"
													[tooltip]="violation.comment?'View And Add':''"
													(click)="isViolationCommentOpen(violation.id)">{{addCommentTitle}}</a>
											</div>
										</td>
										<td *ngIf="isShowTcoItems">
											<div class="button-switch">
												<input type="checkbox" id="switch-blue"
													[disabled]="showChecklistAddBtn =='hide'"
													(click)="changeTcoForViolation($event,violation.id)" class="switch"
													[ngModel]="violation.tcoToggle" />
											</div>
										</td>
										<td *ngIf="!isCustomerLoggedIn">
											<span class="material-symbols-outlined" [matMenuTriggerFor]="menu"
												aria-label="Example icon-button with a menu">more_vert</span>
											<mat-menu #menu="matMenu">
												<button mat-menu-item
													(click)="openDobViolationViewModal(viewDobSafetyViolation,violation.id)">
													<span>View Violation</span>
												</button>
												<button *ngIf="showAddViolation =='show'" mat-menu-item
													(click)="openViolationModalForm(formAddDobSafetyViolation,violation.id)">
													<span>Edit Violation</span>
												</button>
												<button *ngIf="showDeleteViolation =='show'" mat-menu-item
													(click)="deleteVoilationPopup(deleteVoilation, violation.id)">
													<span>Delete</span>
												</button>
												<!-- <div>
													<button mat-menu-item (click)="openBis(violation,'DOB Violation')">
														<span>BIS</span>
													</button>
												</div> -->
											</mat-menu>
									</tr>
								</ng-container>
							</ng-container>
						</table>
					</div>
				</mat-expansion-panel>

			</mat-expansion-panel>
		</mat-accordion>
	</div>



	<div class="empty-img" *ngIf="mainChecklistArray.length == 0">
		<div class="empty-img-containt">
			<img src="./assets/images/empty2.png">
		</div>
		<p style="color: #AAAAAA" *ngIf="!isSearchNoDataFound">No checklists exist for this project. Click here to
			create the first checklist!</p>
		<p style="color: #AAAAAA" *ngIf="isSearchNoDataFound">No matching records were found.</p>
		<ng-container *ngIf="!isCustomerLoggedIn">
			<button class="btn btn-blue" *ngIf="showChecklistAddBtn =='show'" (click)="createChecklist()">Create a
				Checklist</button>
		</ng-container>
	</div>
</div>


<ng-template #formGenerateChecklist>
	<div generte-checklist [modalRef]="modalRef" [checklistType]="checklistType"
		[isEditGeneralFromCompositeChecklist]="isEditGeneralFromCompositeChecklist"
		[checkListSwitcherData]="checkListSwitcherData" [idChecklist]="idChecklist"
		(sendChildValue)="isChecklistGenerate($event)" (sendChildValueAfterChecklistUpdate)="isChecklistUpdate($event)">
	</div>
</ng-template>

<ng-template #formAddExternalChecklist>
	<div add-external-checklist [modalRef]="modalRef" [idJob]="idJob" (externalApplicationAdded)="reload($event)"
		[idChecklistForApplication]="value"></div>
</ng-template>

<ng-template #formAddItemInChecklist>
	<div add-item-in-job [modalRef]="modalRef" [id]="groupId" (sendChildValue)="isItemAdded($event)"></div>
</ng-template>

<ng-template #formAddInspectionInChecklist>
	<div add-inspection-in-floor [modalRef]="modalRef" [id]="groupId"
		[idJobPlumbingCheckListFloors]="idJobPlumbingCheckListFloors" [idWorkPermits]="idWorkPermits"
		(sendChildValue)="isItemAdded($event)"></div>
</ng-template>

<ng-template #formAddComment>
	<div [isCustomerLoggedIn]="isCustomerLoggedIn" add-checklist-comment [modalRef]="modalRef"
		[isPlChecklist]="IsPlGroup" [IdJobChecklistItemDetail]="IdJobChecklistItemDetail"
		[IdJobPlumbingInspection]="IdJobPlumbingInspection" (sendChildValue)="isCommentCreated($event)"></div>
</ng-template>

<ng-template #formAddViolationComment>
	<div add-violation-comment [isCustomerLoggedIn]="isCustomerLoggedIn" [modalRef]="modalRef"
		[idViolation]="idViolation" (sendChildValue)="isViolationCommentCreated($event)"></div>
</ng-template>

<ng-template #formAddViolation>
	<div add-violation-checklist [modalRef]="modalRef" [type]="violationType" [idJob]="idJob"
		[idCompositeChecklist]="value" (voilationAdded)="reload($event)"></div>
</ng-template>


<!-- <ng-template #formEditViolation>
	<div add-violation [modalRef]="modalRef" [reload]="reload()" [isNew]="isNew" [idViolation]="idViolation"
		[idJob]="idJob"></div>
</ng-template> -->
<ng-template #formEditViolation>
	<div edit-violation-checklist [modalRef]="modalRef" (voilationAdded)="reload($event)" [isNew]="isNew"
		[idViolation]="idViolation" [idJob]="idJob"></div>
</ng-template>

<ng-template #formEditDobViolation>
	<div add-dob-violation [modalRef]="modalRef" [isFromChecklist]="true" (voilationUpdated)="reload()"
		[reload]="reload" [idViolation]="idViolation" [idJob]="idJob"></div>
</ng-template>

<!-- Add Edit Dob Safety Violation Form -->
<ng-template #formAddDobSafetyViolation>
	<div add-dob-safety-violation [isFromChecklist]="true" (voilationUpdated)="reload()" [modalRef]="modalRef" [idViolation]="idViolation"
		[idJob]="idJob"></div>
</ng-template>

<!-- <ng-template #formAddViolation>
	<div add-violation [modalRef]="modalRef" [reload]="reload" [isNew]="isNew" [idViolation]="idViolation" [idJob]="idJob"></div>
  </ng-template> -->

<ng-template #exportChecklist>
	<div export-checklist [modalRef]="modalRef" [mainChecklistArray]="mainChecklistArray"
		[checklistType]="checklistType" [idCompositeChecklist]="value" [exportFileType]="exportFileType"></div>
</ng-template>

<ng-template #tplDeleteChecklist>
	<div class="modal-custom-content" cdkDrag>
		<div class="modal-header" cdkDragHandle>
			<button type="button" class="close close-icn" cdkDragHandle>
				<span class="fa fa-arrows"></span>
			</button>
			<h4 class="modal-title pull-left">Delete Selected Checklist</h4>
		</div>

		<div class="modal-body">
			<label>Are you sure you want to delete? Deleting this checklist will delete all the groups and items from it
				and the action cannot be undone</label>
		</div>

		<div class="modal-footer">
			<button *ngIf="checklistType == 'General'" type="button" class="btn btn-blue pull-right"
				(click)="deleteSlectedCheklist()">Yes</button>
			<button *ngIf="checklistType == 'Composite'" type="button" class="btn btn-blue pull-right"
				(click)="deleteSlectedCompositeCheklist()">Yes</button>
			<button type="button" class="btn btn-white pull-right" (click)="modalRef.hide()">No</button>
		</div>
	</div>
</ng-template>

<ng-template #tplDeleteChecklistItem>
	<div class="modal-custom-content" cdkDrag>
		<div class="modal-header cdkDragHandle">
			<button type="button" class="close close-icn" cdkDragHandle>
				<span class="fa fa-arrows"></span>
			</button>
			<h4 class="modal-title pull-left">
				Confirmation
				<!-- Delete Selected Checklist Item -->
			</h4>
		</div>

		<div class="modal-body">
			<label>{{deleteChecklistItemStatus == '3' ? 'It is complete record, do you really want to delete checklist
				item?' : 'Do you really want to delete checklist item?'}}
				<!-- Are you sure you want to delete the Checklist Item ?  -->
			</label>
		</div>

		<div class="modal-footer">
			<button type="button" class="btn btn-blue pull-right" (click)="delete()">Yes</button>
			<button type="button" class="btn btn-white pull-right" (click)="modalRef.hide()">No</button>
		</div>
	</div>
</ng-template>

<ng-template #deleteVoilation>
	<div class="modal-custom-content" cdkDrag>
		<div class="modal-header" cdkDragHandle>
			<button type="button" class="close close-icn" cdkDragHandle>
				<span class="fa fa-arrows"></span>
			</button>
			<h4 class="modal-title pull-left">Delete Selected Violation</h4>
		</div>

		<div class="modal-body">
			<label>Are you sure you want to delete the Violation ? </label>
		</div>

		<div class="modal-footer">
			<button type="button" class="btn btn-blue pull-right" (click)="delinkViolation()">Yes</button>
			<button type="button" class="btn btn-white pull-right" (click)="modalRef.hide()">No</button>
		</div>
	</div>
</ng-template>

<ng-template #PlItemDelete>
	<div class="modal-custom-content" cdkDrag>
		<div class="modal-header" cdkDragHandle>
			<button type="button" class="close close-icn" cdkDragHandle>
				<span class="fa fa-arrows"></span>
			</button>
			<h4 class="modal-title pull-left">Delete Selected Checklist Item</h4>
		</div>

		<div class="modal-body">
			<label>{{deleteChecklistItemStatus == '1' ? 'It is pass record, do you really want to delete checklist
				item?' : 'Are you sure you want to delete the Checklist Item ?'}}</label>
		</div>

		<div class="modal-footer">
			<button type="button" class="btn btn-blue pull-right" (click)="deletePlItem()">Yes</button>
			<button type="button" class="btn btn-white pull-right" (click)="modalRef.hide()">No</button>
		</div>
	</div>
</ng-template>

<ng-template #editWorkOrderNo>
	<div class="modal-custom-content" cdkDrag>
		<form #groupform="ngForm">
			<div class="modal-header" cdkDragHandle>
				<button type="button" class="close close-icn" cdkDragHandle>
					<span class="fa fa-arrows"></span>
				</button>
				<h4 class="modal-title pull-left">Edit Work Order number: {{workorderNumber}}</h4>
			</div>

			<div class="modal-body">
				<input type="text" class="input name" id="name" numbersOnly placeholder="Enter Number"
					[(ngModel)]="workOrderData.number" #name="ngModel" name="name" required>
			</div>

			<div class="modal-footer">
				<button type="button" class="btn btn-blue pull-right" [disabled]="!groupform.form.valid"
					(click)="saveWorkorder()">Save</button>
				<button type="button" class="btn btn-white pull-right" (click)="modalRef.hide()">Cancel</button>
			</div>
		</form>
	</div>
</ng-template>

<ng-template #ViewReferenceNote>
	<div class="modal-custom-content" cdkDrag>
		<div class="modal-header" cdkDragHandle>
			<button type="button" class="close close-icn" cdkDragHandle>
				<span class="fa fa-arrows"></span>
			</button>
			<h4 class="modal-title pull-left">References/Notes</h4>
		</div>

		<div class="modal-body">
			<ng-container *ngIf="referenceNote">
				<div>
					<label style="font-size: 25px;">Internal Document References</label>
					<div *ngFor="let referenceDoc of referenceNote[0].referenceDoc;  let i = index">
						<a style="cursor: pointer;" class="link-blue" href="{{referenceDoc.contentPath}}"
							target="_blank">{{referenceDoc.fileName}}</a>
					</div>
				</div>
				<div class="cart">
					<label style="font-size: 25px;">Reference Note</label>
					<div style=" border: 1px solid black;" *ngIf="referenceNote[0].referenceNote">
						<!-- <span> {{referenceNote[0].referenceNote}}</span> -->
						<div style="margin-left: 2rem;" [innerHTML]="referenceNote[0].referenceNote"></div>
						<!-- <ck-editor  [(ngModel)]="referenceNote[0].referenceNote" [readonly]="isDisabled" name="notes" id="notes" [config]="{}" debounce="400 "  #ckeditor></ck-editor> -->
					</div>
				</div>
				<div class="cart">
					<label style="font-size: 25px;">External Website Link</label>
					<div *ngFor="let links of externalLink;  let i = index">
						<a style="cursor: pointer;" (click)="redirectExternalWebsite(links)">{{links}}</a>
					</div>
				</div>
			</ng-container>
			<ng-container *ngIf="!referenceNote">

			</ng-container>
		</div>

		<div class="modal-footer">
			<!-- <button type="button" class="btn btn-blue pull-right" (click)="delete()">Yes</button> -->
			<button type="button" class="btn btn-white pull-right" (click)="modalRef.hide()">Close</button>
		</div>
	</div>
</ng-template>

<ng-template #addJobDocument>
	<div add-job-document [modalRef]="modalRef" (reload)="reload()" [DocumentId]="DocumentId"
		[DocumentObj]="DocumentObj" [idJob]="idJob" [isChecklist]="IdJobChecklistItemDetail" [isClone]=isClone></div>
</ng-template>

<ng-template #upLoadJobDocument>
	<div upload-doc-in-checklist [modalRef]="modalRef" (reload)="reload()" [DocumentId]="DocumentId"
		[DocumentObj]="DocumentObj" [idJob]="idJob" [isChecklist]="IdJobChecklistItemDetail" [isClone]=isClone
		[IsPlGroup]="IsPlGroupChecklist"></div>
</ng-template>
<!-- Create Proposal progression note Popup-->

<ng-template #rfpprogressionnote>
	<div add-checklist-progress-note [isPlChecklist]="IsPlGroup" [idRfp]="IdJobChecklistItemDetail"
		[modalRef]="modalRef" [IdJobPlumbingInspection]="IdJobPlumbingInspection"></div>
</ng-template>

<ng-template #addtransmittal>
	<div add-transmittal [modalRef]="modalRef" [idJob]="idJob" [jobObj]="jobDetail"></div>
</ng-template>

<ng-template #progressionnote>
	<div violation-note [modalRef]="modalRef" [idViolation]="idViolation"></div>
</ng-template>

<ng-template #jobDocument>
	<div view-checklist-doc [modalRefChecklist]="modalRef" [IsPlGroup]="IsPlGroupChecklist"
		[idChecklistItem]="IdJobChecklistItemDetail"></div>
</ng-template>

<ng-template #viewViolation>
	<div view-violation [modalRef]="modalRef" [id]="idViolation" [idJob]="idJob" [isFromChecklist]="true"
		[violationType]="'AOTH Violation'">
	</div>
</ng-template>

<ng-template #viewDobSafetyViolation>
	<div view-violation [modalRef]="modalRef" [id]="idViolation" [idJob]="idJob" [isFromChecklist]="true"
		[violationType]="'DOB Safety Violation'">
	</div>
</ng-template>

<ng-template #viewDobViolation>
	<div view-violation [modalRef]="modalRef" [id]="idViolation" [idJob]="idJob" [isFromChecklist]="true"
		[violationType]="'DOB Violation'">
	</div>
</ng-template>

<ng-template #viewEcbFromDobViolation>
	<div view-violation [modalRef]="modalRef" [id]="idViolation" [idJob]="idJob" [isGetBySummonsNumber]="true"
		[violationType]="'AOTH Violation'"></div>
</ng-template>

<ng-template #clientnotes>
	<ng-container *ngIf="customerId">
		<div add-progression-note [customerId]="customerId" [itemIdForClientNote]="itemIdForClientNote"
			[modalRef]="modalRef" [isPl]="isPl"></div>
	</ng-container>
</ng-template>

<ng-template #deleteConfirmationMultipleItems>
	<div class="modal-custom-content" cdkDrag>
		<div class="modal-header" cdkDragHandle>
			<button type="button" class="close close-icn" cdkDragHandle>
				<span class="fa fa-arrows"></span>
			</button>
			<h4 class="modal-title pull-left">Delete Selected Items</h4>
		</div>

		<div class="modal-body">
			<label>Are you sure you want to delete?</label>
		</div>

		<div class="modal-footer">
			<button type="button" class="btn btn-blue pull-right" (click)="deleteSelectedItems()">Yes</button>
			<button type="button" class="btn btn-white pull-right" (click)="modalRef.hide()">No</button>
		</div>
	</div>
</ng-template>

<div class="lds-css" *ngIf="loading">
	<div class="lds-ripple">
		<div></div>
		<div></div>
	</div>
</div>